(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1804:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(11),i=a(16),o=a(18),l=a(17),c=a(19),s=a(74),d=a(20),u=a(0),m=a.n(u),p=a(1),h=a(6),f=a(277),g=a(391),b=a.n(g),y=a(392),v=a.n(y),x=a(7),k=a(23),E=a(26),S=a(4),w=a.n(S),T=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={checkedOpen:!0,checkedCompleted:!0},a.handleChange=function(e){return function(t){a.setState(Object(d.a)({},e,t.target.checked)),a.props.toggleStatus(e,t.target.checked)}},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.setState({checkedOpen:this.props.transactionStatus.checkedOpen,checkedCompleted:this.props.transactionStatus.checkedCompleted})}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return m.a.createElement("div",{className:w()(e.root)},m.a.createElement("div",{className:w()("flex flex-col")},m.a.createElement(p.T,{className:"flex flex-1 flex-col min-h-px p-20"},m.a.createElement("div",{style:{marginTop:50,display:"flex",flexDirection:"column"}},m.a.createElement("h3",null,"Transaction Status"),m.a.createElement(v.a,{control:m.a.createElement(b.a,{checked:this.state.checkedOpen,onChange:this.handleChange("checkedOpen"),value:"checkedOpen"}),label:"Open"}),m.a.createElement(v.a,{control:m.a.createElement(b.a,{checked:this.state.checkedCompleted,onChange:this.handleChange("checkedCompleted"),value:"checkedCompleted"}),label:"Completed"})))))}}]),t}(u.Component);var C=Object(h.withStyles)(function(e){var t;return{root:{},panel:(t={position:"absolute",width:300,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[3],top:0,height:"100%",minHeight:"100%",bottom:0,left:-300,margin:0,zIndex:1e3,transform:"translate3d(50px,0,0)",overflow:"hidden"},Object(d.a)(t,e.breakpoints.down("md"),{transform:"translate3d(360px,0,0)",boxShadow:"none","&.opened":{boxShadow:e.shadows[5]}}),Object(d.a)(t,"transition",e.transitions.create(["transform"],{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.standard})),Object(d.a)(t,"&.opened1",{transform:"translateX(300px)"}),t)}})(Object(E.b)(function(e){var t=e.transactions;return{filterState:t.bOpenedTransactionFilterPanel,transactionStatus:t.transactionStatus}},function(e){return Object(k.c)({toggleStatus:x.od},e)})(T)),O=a(9),j=a(147),N=a(394),D=a(202),R=(a(390),a(33)),F=a.n(R),I=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={s:"",temp:[],data:[],selection:[],selectAll:!1,selectedInvoice:null,alertOpen:!1,keyToBeRemoved:-1},a.onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n.toString()})},a.toggleSelection=function(e,t,r){var i=Object(n.a)(a.state.selection),o=i.indexOf(e);o>=0?i=[].concat(Object(n.a)(i.slice(0,o)),Object(n.a)(i.slice(o+1))):i.push(e),a.setState({selection:i})},a.isSelected=function(e){return a.state.selection.includes(e)},a.search=function(e){var t=a.props.data.filter(function(t){return console.log("value=",t),-1!==t.Name.indexOf(e)||!e||-1!==t.FranchiseeNo.indexOf(e)||-1!==t.Number.indexOf(e)||-1!==t.ExtendedPrice.toString().indexOf(e)||-1!==t.Tax.toString().indexOf(e)||-1!==t.Fees.toString().indexOf(e)||-1!==t.TotalTrxAmount.toString().indexOf(e)});a.setState({data:t})},a.handleChange=function(e){return function(t){a.setState(Object(d.a)({},e,t.target.value))}},a.handleClose=function(){a.setState({alertOpen:!1})},a.handleOpen=function(e){a.setState({alertOpen:!0}),a.setState({keyToBeRemoved:e})},a.removeSelectedTransaction=function(){a.props.removeTransaction(a.state.keyToBeRemoved,a.props.transactions),a.state.selection.length>0&&F.a.remove(a.state.selection,function(e){return e===this.state.keyToBeRemoved}),a.setState({alertOpen:!1})},a.fetchData=a.fetchData.bind(Object(s.a)(Object(s.a)(a))),a.escFunction=a.escFunction.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.data!==e.data&&this.setState({data:this.props.data}),t.s!==this.state.s&&this.search(this.state.s)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"escFunction",value:function(e){27===e.keyCode&&(this.setState({s:""}),this.setState({data:this.props.data}))}},{key:"fetchData",value:function(e,t){this.setState({pageSize:e.pageSize,page:e.page})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.toggleFilterPanel,r=t.filterState,i=t.summaryState,o=this.toggleSelection,l=this.isSelected;return m.a.createElement("div",{className:w()(a.layoutTable,"h-full")},m.a.createElement(D.b,{data:this.state.data,minRows:0,PaginationComponent:N.a,onFetchData:this.fetchData,getTheadGroupProps:function(e,t,a,n){return{style:{padding:"10px 10px",fontSize:16,fontWeight:700}}},getTheadGroupThProps:function(e,t,a,n){return{style:{padding:"10px 10px",fontSize:18,fontWeight:700},className:w()("flex items-center justify-start")}},getTheadThProps:function(e,t,a,n){var r="1px solid rgba(255,255,255,.6)";return"Actions"===a.Header&&(r="none"),{style:{fontSize:"1.6rem",fontFamily:'Muli,Roboto,"Helvetica",Arial,sans-serif',fontWeight:400,lineHeight:1.75,color:"white",borderRight:r}}},getTheadProps:function(e,t,n,r){return{style:{fontSize:13},className:a.tableTheadRow}},getTdProps:function(e,t,a,n){return{style:{textAlign:"center",flexDirection:"row",fontSize:12,padding:"0"}}},getTrProps:function(e,t,a){return{className:"cursor-pointer",onClick:function(e,t){}}},columns:[{Header:function(t){return m.a.createElement("div",{className:"flex items-center"},m.a.createElement(p.C,{smDown:!0},m.a.createElement(p.c,{onClick:function(e){return n()},"aria-label":"toggle filter panel",color:"secondary",disabled:!!r,className:w()(a.filterPanelButton)},m.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"}))),m.a.createElement(p.C,{smUp:!0},m.a.createElement(p.c,{onClick:function(t){return e.pageLayout.toggleLeftSidebar()},"aria-label":"toggle filter panel",className:w()(a.filterPanelButton)},m.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"}))))},columns:[{Header:function(e){return m.a.createElement("div",null)},accessor:"",Cell:function(e){return m.a.createElement(p.h,{onClick:function(e){e.stopPropagation()},checked:l(e.value.key),onChange:function(){return o(e.value.key)}})},className:"justify-center",sortable:!1,width:72}],className:w()("justify-center")},{Header:function(){return m.a.createElement("div",{className:"flex items-center pr-0 lg:pr-12"},m.a.createElement(p.T,{className:"flex items-center h-44 w-full lg:mr-12 xs:mr-0",elevation:1},m.a.createElement(p.F,{placeholder:"Search...",className:w()(a.search,"pl-16"),disableUnderline:!0,fullWidth:!0,value:e.state.s,onChange:e.handleChange("s"),inputProps:{"aria-label":"Search"}}),m.a.createElement(p.D,{color:"action",className:"mr-16"},"search")))},columns:[{Header:"Franchisee #",accessor:"FranchiseeNo",filterAll:!0,width:120,className:w()(a.tableTdEven,"flex items-center  justify-center")},{Header:"Number",accessor:"Number",filterAll:!0,width:120,className:w()(a.tableTdEven,"flex items-center  justify-center")},{Header:"Description",accessor:"Description",width:420,className:w()("flex items-center  justify-start p-12-impor")},{Header:"Name",accessor:"Name",className:w()(a.tableTdEven,"flex items-center  justify-center"),width:160},{Header:"Extended Price",accessor:"ExtendedPrice",Cell:function(e){return"$"+parseFloat(e.original.ExtendedPrice).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:w()(a.tableTdEven,"flex items-center  justify-end p-12-impor"),width:150},{Header:"Tax",accessor:"Tax",Cell:function(e){return"$"+parseFloat(e.original.Tax).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:w()(a.tableTdEven,"flex items-center  justify-end p-12-impor"),width:120},{Header:"Fees",accessor:"Fees",Cell:function(e){return"$"+parseFloat(e.original.Fees).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:w()(a.tableTdEven,"flex items-center  justify-end p-12-impor"),width:120},{Header:"Total",Cell:function(e){return"$"+parseFloat(e.original.TotalTrxAmount).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},accessor:"TotalTrxAmount",className:w()("flex items-center  justify-end p-12-impor"),width:120},{Header:"Trx Date",accessor:"TrxDate",className:w()(a.tableTdEven,"flex items-center  justify-center"),width:120},{Header:"TrxType",accessor:"TrxType",className:w()(a.tableTdEven,"flex items-center  justify-center"),width:120},{Header:"Status",accessor:"Status",className:w()(a.tableTdEven,"flex items-center  justify-center"),width:120},{Header:"Actions",width:128,Cell:function(t){return m.a.createElement("div",{className:"flex items-center actions"},m.a.createElement(p.E,{onClick:function(a){a.stopPropagation(),e.handleOpen(t.original.key)}},m.a.createElement(p.D,null,"delete")),m.a.createElement(p.E,{onClick:function(e){e.stopPropagation()}},m.a.createElement(p.D,null,"edit")))}}]},{Header:function(e){return m.a.createElement("div",{className:"flex flex-1 items-center justify-end pr-12",style:{display:"none"}},m.a.createElement(p.C,{smDown:!0},m.a.createElement(p.c,{"aria-label":"toggle summary panel",disabled:!!i,className:w()(a.summaryPanelButton)},m.a.createElement(p.D,null,"insert_chart"))),m.a.createElement(p.C,{smUp:!0},m.a.createElement(p.c,{"aria-label":"toggle summary panel",className:w()(a.summaryPanelButton)},m.a.createElement(p.D,null,"insert_chart"))))},columns:[{Header:"",cell:function(){return m.a.createElement("div",{className:"flex w-full justify-end"})}}]}],defaultPageSize:100,className:w()("-striped -highlight"),totalRecords:this.state.data.length,style:{height:"100%"}}),m.a.createElement(p.m,{open:this.state.alertOpen,onClose:function(){return e.handleClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement(p.q,{id:"alert-dialog-title"},"Remove Transaction"),m.a.createElement(p.o,null,m.a.createElement(p.p,{id:"alert-dialog-description"},"Do you really want to remove the selected transaction?")),m.a.createElement(p.n,null,m.a.createElement(p.c,{onClick:function(){return e.handleClose()},color:"primary"},"Disagree"),m.a.createElement(p.c,{onClick:function(){return e.removeSelectedTransaction()},color:"primary",autoFocus:!0},"Agree"))))}}]),t}(u.Component);var H=Object(h.withStyles)(function(e){return{layoutTable:{flexDirection:"row","& .z-9999":{height:64},"& .-pageSizeOptions":{display:"none"},"& .openFilter":{width:"inherit"},"& .openSummary":{width:300},"& .p-12-impor":{paddingLeft:"1.2rem!important",paddingRight:"1.2rem!important"},"& .ReactTable .rt-noData":{top:"250px",border:"1px solid coral"},"& .ReactTable .rt-thead.-headerGroups":{paddingLeft:"0!important",paddingRight:"0!important",minWidth:"inherit!important"},"& .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover":{background:"rgba("+I(e.palette.secondary.main).r+","+I(e.palette.secondary.main).g+","+I(e.palette.secondary.main).b+", .8)",color:"white!important"},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead.-headerGroups .rt-th:nth-child(2)":{width:"inherit!important",minWidth:"inherit!important"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-end"}},content:{position:"relative"},search:Object(d.a)({width:360},e.breakpoints.down("sm"),{width:"100%"}),tableTheadRow:{backgroundColor:e.palette.primary.main},tableThEven:{backgroundColor:"rgba("+I(e.palette.secondary.main).r+","+I(e.palette.secondary.main).g+","+I(e.palette.secondary.main).b+", .3)"},tableTdEven:{},filterPanelButton:{backgroundColor:e.palette.secondary.main,minWidth:42,padding:8,justifyContent:"center","&:hover":{backgroundColor:e.palette.primary.dark}},summaryPanelButton:{backgroundColor:e.palette.secondary.main,minWidth:42,padding:8,color:"white",justifyContent:"center","&:hover":{backgroundColor:e.palette.primary.dark}},imageIcon:{width:24}}},{withTheme:!0})(Object(f.g)(Object(j.a)(function(e){var t=e.transactions;return{regionId:e.auth.login.defaultRegionId,transactions:t.transactionsDB}},function(e){return Object(k.c)({toggleFilterPanel:x.nd,removeTransaction:x.Vc},e)})(P))),B=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={s:"",data:[],selection:[],regionId:0,checkedCompleted:!0,checkedOpen:!0},a.handleChange=function(e){return function(t){a.setState(Object(d.a)({},e,t.target.value))}},a.getTransactions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.transactions;if(null!==e.transactionsDB){var t=e.transactionsDB.Data.FranchiseeTransactions,r=[],i=[],o=["Open","Completed"];["checkedOpen","checkedCompleted"].map(function(e,l){return a.props.transactionStatus[e]&&(r=t.filter(function(e){return e.Status.toLowerCase()===o[l].toLowerCase()})),i=F.a.uniq([].concat(Object(n.a)(i),Object(n.a)(r))),!0}),a.setState({temp:i}),a.setState({data:i})}},e.bLoadedTransactions||e.getTransactions(),a.fetchData=a.fetchData.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"fetchData",value:function(e,t){this.setState({pageSize:e.pageSize,page:e.page})}},{key:"componentWillMount",value:function(){this.setState({checkedCompleted:this.props.transactionStatus.checkedCompleted}),this.setState({checkedOpen:this.props.transactionStatus.checkedOpen}),this.getTransactions()}},{key:"componentDidUpdate",value:function(e,t,a){var n=!1;this.props.regionId!==e.regionId&&(this.setState({regionId:e.regionId}),n=!0),this.props.transactionStatus.checkedCompleted!==e.transactionStatus.checkedCompleted&&(this.setState({checkedCompleted:!this.state.checkedCompleted}),n=!0),this.props.transactionStatus.checkedOpen!==e.transactionStatus.checkedOpen&&(this.setState({checkedOpen:!this.state.checkedOpen}),n=!0),n&&this.getTransactions(),e.transactions!==this.props.transactions&&this.getTransactions()}},{key:"componentWillReceiveProps",value:function(e){this.props.transactions!==e.transactions&&this.getTransactions(e.transactions)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.filterState,r=t.toggleFilterPanel,i=this.state.selection;return m.a.createElement(O.m,{classes:{root:a.layoutRoot,header:a.layoutHeader,content:a.content,leftSidebar:w()(a.layoutLeftSidebar,{openFilter:n}),sidebarHeader:a.layoutSidebarHeader},leftSidebarHeader:m.a.createElement("div",{className:w()("flex flex-row w-full h-full justify-between p-12 align-middle pr-0",{filteropen:n})},m.a.createElement("h4",{style:{marginBlockStart:"1em"}},"Filter Panel"),m.a.createElement(O.a,{animation:"transition.expandIn",delay:200},m.a.createElement("div",null,m.a.createElement(p.C,{xsDown:!0},m.a.createElement(p.E,{onClick:function(e){return r()}},m.a.createElement(p.D,null,"close")))))),leftSidebarContent:m.a.createElement(C,null),header:m.a.createElement("div",{className:"flex row flex-1  p-8 sm:p-12 relative justify-between"},m.a.createElement("div",{className:"flex flex-row flex-1 justify-between"},m.a.createElement("div",{className:"flex flex-shrink items-center"},m.a.createElement("div",{className:"flex items-center"},m.a.createElement(O.a,{animation:"transition.expandIn",delay:300},m.a.createElement(p.D,{className:"text-32 mr-12"},"account_box")),m.a.createElement(O.a,{animation:"transition.slideLeftIn",delay:300},m.a.createElement(p.mb,{variant:"h6",className:"hidden sm:flex"},"Franchisees | Transactions")))),m.a.createElement("div",{className:"flex flex-shrink items-center"},m.a.createElement(O.a,{animation:"transition.expandIn",delay:300},m.a.createElement(p.t,{color:"secondary","aria-label":"add",className:w()(a.sideButton,"mr-12"),onClick:function(){return alert("ok")}},m.a.createElement(p.D,null,"add"))),m.a.createElement(O.a,{animation:"transition.expandIn",delay:300},m.a.createElement(p.t,{color:"secondary","aria-label":"add",className:w()(a.sideButton,"mr-12"),onClick:function(){return e.props.history.push("/apps/mail/inbox")}},m.a.createElement(p.D,null,"mail_outline"))),m.a.createElement(O.a,{animation:"transition.expandIn",delay:300},m.a.createElement(p.t,{color:"secondary","aria-label":"add",className:a.sideButton,onClick:function(){return alert("ok")}},m.a.createElement(p.D,null,"print"))))),m.a.createElement("div",{className:"flex flex-none items-end",style:{display:"none"}},m.a.createElement(O.a,{animation:"transition.expandIn",delay:600},m.a.createElement(p.t,{color:"secondary","aria-label":"add",className:a.addButton,onClick:function(){return alert("ok")}},m.a.createElement(p.D,null,"add"))),i.length>0&&m.a.createElement(O.a,{animation:"transition.expandIn",delay:600},m.a.createElement(p.t,{color:"secondary","aria-label":"delete",className:a.removeButton,onClick:function(){return e.removeInvoices()}},m.a.createElement(p.D,null,"delete"))))),content:m.a.createElement("div",{className:"flex-1 flex-col absolute w-full h-full"},m.a.createElement(H,{data:this.state.data})),onRef:function(t){e.pageLayout=t}})}}]),t}(u.Component);t.default=Object(h.withStyles)(function(e){return{layoutRoot:{flexDirection:"row","& .z-9999":{height:64},"& .-pageSizeOptions":{display:"none"},"& .ReactTable .rt-noData":{top:"250px",border:"1px solid coral"},"& .ReactTable .rt-thead.-headerGroups":{paddingLeft:"0!important",paddingRight:"0!important",minWidth:"inherit!important"},"& .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover":{background:"rgba("+B(e.palette.secondary.main).r+","+B(e.palette.secondary.main).g+","+B(e.palette.secondary.main).b+", .8)",color:"white!important"},"& .openFilter":{width:"inherit"},"& .openSummary":{width:300},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead.-headerGroups .rt-th:nth-child(2)":{width:"inherit!important",minWidth:"inherit!important"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-start"},"& .p-12-impor":{paddingLeft:"1.2rem!important",paddingRight:"1.2rem!important"}},layoutHeader:{height:80,minHeight:80,backgroundColor:e.palette.secondary.main},layoutLeftSidebar:Object(d.a)({width:0},e.breakpoints.down("sm"),{width:"inherit"}),layoutSidebarHeader:{height:80,minHeight:80,display:"flex",alignItems:"center",backgroundColor:e.palette.secondary.main},content:{position:"relative"},search:Object(d.a)({width:360},e.breakpoints.down("sm"),{width:"100%"}),sideButton:{backgroundColor:e.palette.primary.light,height:46,width:46,"&:hover":{backgroundColor:e.palette.primary.dark}},tableTheadRow:{backgroundColor:e.palette.primary.main,padding:12}}},{withTheme:!0})(Object(f.g)(Object(j.a)(function(e){var t=e.transactions,a=e.auth;return{transactions:t,bLoadedTransactions:t.bLoadedTransactions,filterState:t.bOpenedTransactionFilterPanel,transactionStatus:t.transactionStatus,regionId:a.login.defaultRegionId}},function(e){return Object(k.c)({getTransactions:x.zc,toggleFilterPanel:x.nd},e)})(L)))}}]);
//# sourceMappingURL=15.4607fdbe.chunk.js.map