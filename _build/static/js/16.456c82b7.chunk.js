(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1841:function(e,t,a){"use strict";a.r(t);var n=a(12),i=a(9),r=a(15),s=a(19),o=a(17),l=a(18),c=a(13),d=a(0),u=a.n(d),m=a(1),p=a(10),h=a(167),f=a(177),g=a.n(f),v=a(176),b=a.n(v),x=a(5),y=a(24),E=a(28),C=a(4),S=a.n(C),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={checkedOpen:!0,checkedCompleted:!0},a.handleChange=function(e){return function(t){a.setState(Object(c.a)({},e,t.target.checked)),a.props.toggleStatus(e,t.target.checked)}},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.setState({checkedOpen:this.props.transactionStatus.checkedOpen,checkedCompleted:this.props.transactionStatus.checkedCompleted})}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{className:S()(e.root)},u.a.createElement("div",{className:S()("flex flex-col")},u.a.createElement(m.V,{className:"flex flex-1 flex-col min-h-px p-20"},u.a.createElement("div",{style:{marginTop:50,display:"flex",flexDirection:"column"}},u.a.createElement("h3",null,"Transaction Status"),u.a.createElement(b.a,{control:u.a.createElement(g.a,{checked:this.state.checkedOpen,onChange:this.handleChange("checkedOpen"),value:"checkedOpen"}),label:"Open"}),u.a.createElement(b.a,{control:u.a.createElement(g.a,{checked:this.state.checkedCompleted,onChange:this.handleChange("checkedCompleted"),value:"checkedCompleted"}),label:"Completed"})))))}}]),t}(d.Component);var w=Object(p.withStyles)(function(e){var t;return{root:{},panel:(t={position:"absolute",width:300,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[3],top:0,height:"100%",minHeight:"100%",bottom:0,left:-300,margin:0,zIndex:1e3,transform:"translate3d(50px,0,0)",overflow:"hidden"},Object(c.a)(t,e.breakpoints.down("md"),{transform:"translate3d(360px,0,0)",boxShadow:"none","&.opened":{boxShadow:e.shadows[5]}}),Object(c.a)(t,"transition",e.transitions.create(["transform"],{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.standard})),Object(c.a)(t,"&.opened1",{transform:"translateX(300px)"}),t)}})(Object(E.b)(function(e){var t=e.transactions;return{filterState:t.bOpenedTransactionFilterPanel,transactionStatus:t.transactionStatus}},function(e){return Object(y.c)({toggleStatus:x.ne},e)})(k)),N=a(7),T=a(3),F=a(61),O=a(218),I=a(114),j=a(210),R=a.n(j),D=a(149),P=a.n(D),L=a(250),H=a.n(L),A=a(252),B=a.n(A),z=a(253),W=a.n(z),M=a(254),q=a.n(M),$=a(251),Y=a.n($),U=a(328),V=a(209),G=a(31),_=a.n(G),J=a(127),X=(a(172),a(73)),Q=a(122),Z={success:H.a,warning:Y.a,error:B.a,info:W.a};var K=Object(p.withStyles)(function(e){return{success:{backgroundColor:R.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:P.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,r=e.variant,s=Object(F.a)(e,["classes","className","message","onClose","variant"]),o=Z[r];return u.a.createElement(m.cb,Object.assign({className:S()(t[r],a),"aria-describedby":"client-snackbar",message:u.a.createElement("span",{id:"client-snackbar",className:t.message},u.a.createElement(o,{className:S()(t.icon,t.iconVariant)}),n),action:[u.a.createElement(m.F,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},u.a.createElement(q.a,{className:t.icon}))]},s))}),ee=0;function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Regular Billing",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Adjust-Balance",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return{id:ee++,type:e,frequency:t,description:a,quantity:n,amount:i,tax:r,markup:s,extended:o,total:l}}var ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",selected:[],data:[te("Regular Billing","Adjust-Balance","","")],page:0,labelWidth:0,openSnack:!1,snackMessage:"Please fill the data"},a.handleChangeBilling=function(e,t){var n=a.state.data.map(function(a){var n=a;return t.id===a.id&&(n[e.target.name]=e.target.value),n});a.setState({data:n})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({openSnack:!1})},a.addLineData=function(e){if(null===a.props.transactionForm.franchisee)return a.setState({snackMessage:"Please choose customer from Franchisee suggestion"}),void a.setState({openSnack:!0});if(""===e.description)return a.setState({snackMessage:"Please enter description"}),void a.setState({openSnack:!0});if(""===e.quantity)return a.setState({snackMessage:"Please enter quantity"}),void a.setState({openSnack:!0});if(""===e.amount)return a.setState({snackMessage:"Please enter amount"}),void a.setState({openSnack:!0});var t=[].concat(Object(n.a)(a.state.data),[te()]),i=0,r=t.map(function(e){return e.id=i++,e});a.setState({data:r})},a.removeLineData=function(e){var t=Object(n.a)(a.state.data);_.a.remove(t,function(t){return t.id===e.id});var i=0,r=t.map(function(e){return e.id=i++,e});a.setState({data:r})},a.handleChange=function(e){return function(t){var i=Object(n.a)(a.state.data);i[e.id].franchisees[e.fid].amount=parseFloat(t.target.value),a.setState({data:i})}},a.handleChangeDesc=function(e){return function(t){var i=Object(n.a)(a.state.data);i[e.id].description=t.target.value,a.setState({data:i})}},a.handleChangeTransactionLine=function(e,t){return function(i){var r=Object(n.a)(a.state.data);r[e.id][t]="quantity"===t?parseInt(i.target.value):parseFloat(i.target.value),a.isDisable(e)||(r[e.id].extended=r[e.id].quantity*r[e.id].amount),a.setState({data:r})}},a.isDisable=function(e){return null===a.props.transactionForm.franchisee?(a.setState({snackMessage:"Please choose franchisee from suggestion"}),a.setState({openSnack:!0}),!0):""===e.quantity||(""===e.amount||void 0)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=0,t=Object(n.a)(this.state.data).map(function(t){return t.id=e++,t});this.setState({data:t})}},{key:"componentDidUpdate",value:function(e,t,a){null!==this.state.data&&t.data!==this.state.data&&this.props.updateTransactionLine(this.state.data)}},{key:"componentWillReceiveProps",value:function(e){if(null===e.transactionForm.data&&JSON.stringify(e.transactionForm.data)!==JSON.stringify(this.props.transactionForm.data)){var t=te("Regular Billing","Adjust-Balance","","");this.setState({data:[Object(T.a)({},t,{id:0})]})}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.data;return u.a.createElement(m.V,{className:S()(t.root)},u.a.createElement("div",{className:S()(t.tableWrapper,"flex flex-col h-full")},u.a.createElement(J.b,{data:a,minRows:0,showPagination:!1,getTheadThProps:function(e,t,a,n){var i="1px solid rgba(255,255,255,.6)";return"Action"===a.Header&&(i="none"),{style:{fontSize:13,fontFamily:'Muli,Roboto,"Helvetica",Arial,sans-serif',fontWeight:400,lineHeight:2,color:"white",borderRight:i}}},getTheadProps:function(e,a,n,i){return{style:{fontSize:13},className:t.tableTheadRow}},getTdProps:function(e,t,a,n){return{className:S()({"justify-end":"extended"===a.id},{"justify-end":"line"!==t.original.type})}},columns:[{columns:[{Header:"Type",accessor:"type",Cell:function(a){return u.a.createElement(m.v,{variant:"outlined",className:S()(t.selectRoot,t.formControl),style:{marginBottom:"0!important"}},u.a.createElement(m.Z,{classes:{outlined:S()(t.outlined,t.billing)},value:a.original.type,onChange:function(t){return e.handleChangeBilling(t,a.original)},input:u.a.createElement(m.U,{labelWidth:e.state.labelWidth,name:"type",id:"type"}),MenuProps:{classes:{paper:t.dropdownMenu}}},u.a.createElement(m.R,{value:""},u.a.createElement("em",null,"Select")),u.a.createElement(m.R,{value:"Regular Billing"},"Regular Billing"),u.a.createElement(m.R,{value:"Additional Billing Office"},"Additional Billing Office"),u.a.createElement(m.R,{value:"Extra Work"},"Extra Work"),u.a.createElement(m.R,{value:"Client Supplies"},"Client Supplies")))},width:180,className:S()(t.tableTdEven,"flex items-center  justify-center")},{Header:"Frequency",accessor:"frequency",Cell:function(a){return u.a.createElement(m.v,{variant:"outlined",className:t.formControl,style:{marginBottom:"0!important"}},u.a.createElement(m.Z,{classes:{outlined:S()(t.outlined,t.services)},value:a.original.frequency,onChange:function(t){return e.handleChangeBilling(t,a.original)},input:u.a.createElement(m.U,{labelWidth:e.state.labelWidth,name:"frequency",id:"frequency"}),MenuProps:{classes:{paper:t.dropdownMenu}}},u.a.createElement(m.R,{value:""},u.a.createElement("em",null,"Select")),u.a.createElement(m.R,{value:"Adjust-Balance"},"Adjust - Balance"),u.a.createElement(m.R,{value:"Adjust-Refund"},"Adjust - Refund"),u.a.createElement(m.R,{value:"Adjust-WriteOff"},"Adjust - WriteOff"),u.a.createElement(m.R,{value:"Buffing"},"Buffing"),u.a.createElement(m.R,{value:"Carpet Clean"},"Carpet Clean"),u.a.createElement(m.R,{value:"Customer Suppliers"},"Customer Suppliers"),u.a.createElement(m.R,{value:"Emergency Clean"},"Emergency Clean"),u.a.createElement(m.R,{value:"Event Center"},"Event Center"),u.a.createElement(m.R,{value:"Floor Services"},"Floor Services"),u.a.createElement(m.R,{value:"Furniture Cleaning Service"},"Furniture Cleaning Service"),u.a.createElement(m.R,{value:"High Dusting"},"High Dusting"),u.a.createElement(m.R,{value:"Hotel"},"Hotel"),u.a.createElement(m.R,{value:"In-House Work"},"In-House Work"),u.a.createElement(m.R,{value:"Initial and Deep Clean"},"Initial and Deep Clean"),u.a.createElement(m.R,{value:"Initial One-Time Clean"},"Initial One-Time Clean"),u.a.createElement(m.R,{value:"Make Ready"},"Make Ready"),u.a.createElement(m.R,{value:"Miscellaneous - Special"},"Miscellaneous - Special"),u.a.createElement(m.R,{value:"Other"},"Other"),u.a.createElement(m.R,{value:"Porter Services"},"Porter Services"),u.a.createElement(m.R,{value:"Power Washing"},"Power Washing"),u.a.createElement(m.R,{value:"Regular Billing"},"Regular Billing"),u.a.createElement(m.R,{value:"Regular Cleaning - Day"},"Regular Cleaning - Day"),u.a.createElement(m.R,{value:"Regular Cleaning - Night"},"Regular Cleaning - Night")))},width:180,className:S()(t.tableTdEven,"flex items-center")},{Header:"Description",accessor:"description",Cell:function(a){return u.a.createElement(m.mb,{id:"description",style:{margin:0},placeholder:"Description",fullWidth:!0,value:a.original.description,onChange:e.handleChangeDesc(a.original),margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:t.input}}})}},{Header:"Qty",accessor:"quantity",Cell:function(a){return u.a.createElement(m.mb,{className:t.fInput,placeholder:"Qty",value:a.original.quantity,onChange:e.handleChangeTransactionLine(a.original,"quantity"),InputProps:{inputComponent:Q.b,classes:{input:t.input}}})},className:S()(t.tableTdEven,"flex items-center  justify-center text-center"),width:60},{Header:"Amount",accessor:"amount",Cell:function(a){return u.a.createElement(m.mb,{className:t.fInput,placeholder:"Amount",value:a.original.amount,onChange:e.handleChangeTransactionLine(a.original,"amount"),InputProps:{inputComponent:Q.a,classes:{input:t.input}}})},className:S()(t.tableTdEven,"flex items-center  justify-center text-right"),width:100},{Header:"Tax",accessor:"tax",Cell:function(a){return u.a.createElement(m.mb,{className:t.fInput,placeholder:"Tax",value:a.original.tax,onChange:e.handleChangeTransactionLine(a.original,"tax"),InputProps:{inputComponent:Q.a,classes:{input:t.input}}})},className:S()(t.tableTdEven,"flex items-center  justify-end text-right"),width:80},{Header:"Markup(%)",accessor:"markup",Cell:function(a){return u.a.createElement(m.mb,{className:t.fInput,placeholder:"Markup",value:a.original.markup,onChange:e.handleChangeTransactionLine(a.original,"markup"),InputProps:{inputComponent:Q.d,readOnly:"Client Supplies"!==a.original.billing,classes:{input:t.input}}})},className:S()(t.tableTdEven,"flex items-center  text-right justify-end"),width:80},{Header:"Ext. Amount",accessor:"extended",Cell:function(e){var t=0;return""!==e.original.markup&&(t=e.original.markup),"$"+parseFloat(e.original.extended*(1+parseFloat(t)/100)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:S()(t.tableTdEven,"flex items-center  w-full text-center pr-12"),width:100},{Header:"Action",width:130,Cell:function(a){return u.a.createElement("div",{className:"flex flex-row items-center w-full justify-center"},u.a.createElement(m.t,{color:"secondary","aria-label":"add",className:S()(t.lineButton,"mr-8"),onClick:function(){return e.addLineData(a.original)}},u.a.createElement(m.E,null,"add")),e.state.data.length>1&&u.a.createElement(m.t,{"aria-label":"remove",onClick:function(){return e.removeLineData(a.original)},className:S()(t.lineCancelButton,"mr-0")},u.a.createElement(m.E,null,"close")))}}]}],className:S()("-striped -highlight"),defaultPageSize:200,style:{height:"100%"}})),u.a.createElement(m.bb,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.openSnack,autoHideDuration:3e3,onClose:this.handleClose},u.a.createElement(K,{onClose:this.handleClose,variant:"error",message:this.state.snackMessage})))}}]),t}(u.a.Component);var ne=Object(p.withStyles)(function(e){var t,a;return{root:{width:"100%",marginTop:e.spacing.unit,head:{color:"black"},"& .ReactTable .rt-thead.-headerGroups":{display:"none"},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-end"},"& .franchiRow":{"& .f1":{width:"25%",minWidth:100,padding:10,border:"1px solid lightgray",borderRadius:6},"& .f2":{width:"75%",padding:"4px 8px",border:"0px solid lightgray",borderRadius:6,marginLeft:10}},InvoiceLineHeadRoot:{backgroundColor:"lightgray"},selectRoot:{backgroundColor:"green"}},outlined:{padding:"6px 24px 6px 12px!important"},billing:{width:170,fontSize:"1.3rem"},services:{width:180,fontSize:"1.3rem"},dropdownMenu:{"& li":{fontSize:12,height:12}},lineButton:(t={width:24,height:24,minHeight:24},Object(c.a)(t,e.breakpoints.down("sm"),{width:24,height:24,minHeight:24}),Object(c.a)(t,"& .material-icons",{fontSize:16}),t),lineCancelButton:(a={width:24,height:24,minHeight:24,backgroundColor:"#ff4850",color:"white","&:hover":{backgroundColor:"#ff2a32"}},Object(c.a)(a,e.breakpoints.down("sm"),{width:24,height:24,minHeight:24,padding:0}),Object(c.a)(a,"& .material-icons",{fontSize:16}),a),distribution:{"& span":{backgroundColor:"lightgrey",padding:"8px 12px",borderRadius:20}},tableTheadRow:{backgroundColor:e.palette.primary.main},input:{fontSize:13},fInput:{width:"96%",marginLeft:15,"& input":{fontSize:13,textAlign:"right"}},container:{position:"relative",width:"100%"},suggestionsContainerOpen:{position:"fixed",zIndex:100,marginTop:e.spacing.unit,maxHeight:200,overflowY:"scroll",backgroundColor:"white",borderRadius:6,border:"1px solid lightgray"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"}}})(Object(h.g)(Object(X.a)(function(e){var t=e.franchisees,a=e.auth;return{transactionForm:e.transactions.transactionForm,franchisees:t.franchiseesDB,regionId:a.login.defaultRegionId}},function(e){return Object(y.c)({getCustomerTaxAmount:x.Xc,updateTransactionLine:x.ze},e)})(ae))),ie=a(313),re=a.n(ie),se=a(179),oe=a.n(se),le=a(217),ce=a.n(le),de=a(256),ue=a.n(de),me=a(23),pe=a.n(me),he=new re.a,fe={MasterTrxTypeListId:"",RegionId:"",RegionName:"",InvoiceId:"",TransactionDate:new Date,Date:new Date,CustomerId:"",franchiseeNo:"",CustomerName:"",EBill:"",PrintInvoice:"",FranchiseeDescription:"",InvoiceAmount:"",InvoiceTax:"",InvoiceTotal:"",CPI:"",TransactionStatusListId:"",TransactionStatus:"",InvoiceBalanceAmount:"",InvoiceBalanceTax:"",InvoiceBalanceTotal:"",EBillText:"",PrintInvoiceText:"",IsOpen:"",ConsolidatedInvoice:"",ConsolidatedInvoiceId:"",ConsolidatedInvoiceNo:"",CreditId:"",Service:"",notes:""};function ge(e,t){var a=t.query,n=t.isHighlighted,i=ce()(e.Name,a),r=ue()(e.Name,i);return u.a.createElement(m.R,{selected:n,component:"div"},u.a.createElement("div",null,r.map(function(e,t){return e.highlight?u.a.createElement("span",{key:String(t),style:{fontWeight:700}},e.text):u.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))}var ve={success:H.a,warning:Y.a,error:B.a,info:W.a};var be=Object(p.withStyles)(function(e){return{success:{backgroundColor:R.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:P.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,r=e.variant,s=Object(F.a)(e,["classes","className","message","onClose","variant"]),o=ve[r];return u.a.createElement(m.cb,Object.assign({className:S()(t[r],a),"aria-describedby":"client-snackbar",message:u.a.createElement("span",{id:"client-snackbar",className:t.message},u.a.createElement(o,{className:S()(t.icon,t.iconVariant)}),n),action:[u.a.createElement(m.F,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},u.a.createElement(q.a,{className:t.icon}))]},s))}),xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state=Object(T.a)({franchisees:[]},fe,{value:"",suggestions:[],fSuggestions:[],selectedFranchisee:null,labelWidth:0,selectedWork:"",total:0,subTotal:0,tax:0,markup:0,InvoiceNo:"",snackMessage:"",openSnack:!1,PO_number:"",period:pe()(),taxExempt:!1,bAlertNewTransaction:!1,buttonOption:0}),a.renderInputComponent=function(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,i=e.ref,r=Object(F.a)(e,["classes","inputRef","ref"]);return u.a.createElement(m.mb,Object.assign({fullWidth:!0,variant:"outlined",label:"Franchisee:",InputProps:{inputRef:function(e){i(e),n(e)},classes:{input:t.input}},InputLabelProps:{classes:{outlined:t.label}},required:!0},r,{autoFocus:!0}))},a.onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n.toString()})},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:a.getSuggestions(t)})},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.getSuggestionValue=function(e){return a.setState({selectedFranchisee:e}),a.setState({PO_number:e.franchiseeNo}),e.Name},a.getSuggestions=function(e){var t=Object(Q.e)(e.trim()),n=new RegExp(t,"i");if(null!==a.props.franchisees)return a.props.franchisees.filter(function(e){return n.test(e.Name)})},a.getTotal=function(){var e=0,t=0,i=0;if(null!==a.props.transactionForm.data){var r=Object(n.a)(a.props.transactionForm.data.line);console.log("line=",a.props.transactionForm.data.line),r.forEach(function(a){var n=0,r=0;""!==a.quantity&&(r=a.quantity),""!==a.markup&&(n=a.markup),e+=parseFloat(a.extended),i+=parseFloat(a.tax),t+=parseFloat(a.extended*r*parseFloat(n)/100)}),console.log("aaaaa",e,t,i,e+i+t),a.setState({subTotal:e}),a.setState({markup:t}),a.setState({tax:i}),a.setState({total:e+i+t})}},a.handleChange=function(e){a.setState(_.a.set(Object(T.a)({},a.state),e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.addNewInvoice=function(){var e=he.guid()+"_pending",t=[];a.props.transactionForm.data.line.forEach(function(a){var n={Inv_No:e,ServiceTypeListId:0,Description:a.description,Type:a.type,Frequency:a.frequency,LineNo:1,UnitPrice:parseFloat(a.amount),Quantity:parseInt(a.quantity),TaxRate:a.tax,ExtendedPrice:a.extended,Total:a.total,MarkUpTotal:a.markup,Commission:0,CommissionTotal:0,ExtraWork:1};t.push(n)});var n={Inv_No:e,Apply_to:"Apply To",PeriodId:a.props.invoices.PeriodId[0],Description:a.state.FranchiseeDescription,Notes:a.state.note,RegionId:a.props.regionId,BillRunId:999,InvoiceDate:a.state.InvoiceDate,Date:a.state.Date,CreatedById:a.props.user.UserId,CreatedDate:pe()(),SubTotal:a.state.subTotal,MarkupAmountTotal:a.state.markup,TaxTotal:a.state.tax,GrandTotal:a.state.total,TransactionStatusListId:2,Status:2,SysCust:2,Items:t};a.props.addInvoice(a.props.regionId,n),console.log("result",JSON.stringify(n))},a.validateNewTransaction=function(){return null!==a.state.selectedFranchisee||(a.setState({snackMessage:"Please choose a franchisee from Franchisee suggestion"}),a.setState({openSnack:!0}),!1)},a.onSaveTransaction=function(e){a.validateNewTransaction()&&(a.setState({bAlertNewTransaction:!0}),a.setState({buttonOption:e}))},a.onSaveAndAddMore=function(){a.onSaveTransaction(0)},a.onSaveAndClose=function(){a.onSaveTransaction(1),a.closeComposeForm()},a.onSubmitForApproval=function(){a.onSaveTransaction(2)},a.closeComposeForm=function(){"edit"===a.props.transactionForm.type?a.props.closeEditTransactionForm():a.props.closeNewTransactionForm()},a.handleDueDateChange=function(e){a.setState({Date:e})},a.handleTransactionDateChange=function(e){a.setState({TransactionDate:e})},a.storeInputReference=function(e){null!==e&&(a.input=e.input)},a.handleCloseNewInvoice=function(){a.setState({bAlertNewTransaction:!1})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({openSnack:!1})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.transactionForm!==e.transactionForm&&(console.log("pppppp"),this.getTotal()),null!==this.state.selectedFranchisee&&JSON.stringify(this.state.selectedFranchisee)!==JSON.stringify(this.props.transactionForm.franchisee)&&this.props.selectFranchisee(this.state.selectedFranchisee)}},{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;"new"===this.props.transactionForm.type&&this.setState({InvoiceNo:"PENDING"}),this.input&&setTimeout(function(){e.input.focus()},500)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.value,i=a.suggestions,r=new Date,s={renderInputComponent:this.renderInputComponent,suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:ge},o=!1;return"new"===this.props.transactionForm.type&&(o=!0),u.a.createElement(N.a,{animation:"transition.slideRightIn",delay:300},u.a.createElement("div",{className:"h-full flex flex-col relative"},u.a.createElement("div",{className:"flex flex-col p-24 pt-12 pb-0",style:{flex:"1"}},u.a.createElement(I.b,{utils:O.a},u.a.createElement(m.z,{container:!0,className:S()(t.formControl)},u.a.createElement(m.z,{item:!0,xs:12,sm:6,md:6,className:"flex flex-row pr-16"},u.a.createElement(oe.a,Object.assign({},s,{inputProps:{classes:t,placeholder:"Search Franchisee Name",value:n,onChange:this.onChange},theme:{container:S()(t.container),suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderSuggestionsContainer:function(e){return u.a.createElement(m.V,Object.assign({},e.containerProps,{square:!0}),e.children)},ref:this.storeInputReference}))),u.a.createElement(m.z,{item:!0,xs:12,sm:2,md:2,className:"flex flex-row xs:flex-col xs:mb-24 pr-8 pl-16",style:{padding:"0 6px!important"}},u.a.createElement(I.a,{margin:"none",label:"Transaction Date",name:"TransactionDate",variant:"outlined",format:"MM/DD/YYYY",value:this.state.TransactionDate,onChange:this.handleTransactionDateChange,fullWidth:!0,required:!0,InputProps:{classes:{input:t.input1}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}}})),u.a.createElement(m.z,{item:!0,xs:12,sm:2,md:2,className:"flex flex-row xs:flex-col pr-8 pl-8",style:{padding:"0 6px!important"}},u.a.createElement(I.a,{margin:"none",label:"Due Date",format:"MM/DD/YYYY",name:"Date",variant:"outlined",value:this.state.Date,onChange:this.handleDueDateChange,required:!0,fullWidth:!0,InputProps:{classes:{input:t.input1}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}}})),u.a.createElement(m.z,{item:!0,xs:12,sm:2,md:2,className:"flex flex-row xs:flex-col pl-4"},u.a.createElement(m.mb,{margin:"none",label:"Transaction #",placeholder:"Transaction #",InputProps:{readOnly:o,classes:{input:o?t.inputOrange:t.input}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}},name:"InvoiceNo",variant:"outlined",value:this.state.InvoiceNo,onChange:this.handleChange,required:!0,fullWidth:!0,style:{paddingLeft:4,fontSize:"new"===this.props.transactionForm.type?"18px!important":"inherit",fontWeight:"new"===this.props.transactionForm.type?700:"inherit"}})))),u.a.createElement(U.a,{className:S()(t.formControl,"mb-0")},u.a.createElement(V.a,{xs:12,sm:6,md:6,className:"flex flex-row xs:flex-col"},u.a.createElement(m.d,{className:t.card},u.a.createElement(m.g,{title:"Franchisee Transaction",className:S()(t.cardHeader,"flex-1")}),u.a.createElement(m.f,{className:S()(t.cardContent)},u.a.createElement("div",{className:"flex flex-row justify-between mb-4"},u.a.createElement("div",{className:"flex flex-row"},u.a.createElement(m.E,{fontSize:"small",className:"mr-4"},"account_circle"),u.a.createElement(m.pb,{variant:"subtitle1",color:"inherit"},u.a.createElement("strong",null,this.state.selectedFranchisee?this.state.selectedFranchisee.Name:this.state.value))),u.a.createElement(m.pb,{variant:"subtitle1",color:"inherit"},u.a.createElement("strong",null,"Franchisee #: ",this.state.selectedFranchisee?this.state.selectedFranchisee.Number:this.state.franchiseeNo))),this.state.selectedFranchisee&&u.a.createElement("div",{className:"flex flex-row justify-start mb-4"},u.a.createElement("div",{className:"flex flex-row items-center"},u.a.createElement(m.E,{fontSize:"small",className:"mr-4"},"place"),u.a.createElement(m.pb,{variant:"subtitle1",color:"inherit"},this.state.selectedFranchisee.Address))),this.state.selectedFranchisee&&u.a.createElement("div",{className:"flex flex-row justify-between mb-4"},u.a.createElement("div",{className:"flex flex-row items-center"},u.a.createElement(m.E,{fontSize:"small",className:"mr-4"},"smartphone"),u.a.createElement(m.pb,{variant:"subtitle1",color:"inherit"},this.state.selectedFranchisee.Phone)))))),u.a.createElement(V.a,{xs:12,sm:6,md:6,className:"flex flex-row justify-end xs:flex-col"},u.a.createElement(m.d,{className:t.card},u.a.createElement(m.g,{title:"Billing",className:S()(t.cardHeader,"flex-1")}),u.a.createElement(m.f,{className:S()(t.cardContent)})))),u.a.createElement("div",{className:"w-full mt-4"},u.a.createElement(m.mb,{id:"FranchiseeDescription",name:"FranchiseeDescription",label:"Description",className:t.textField,value:this.state.FranchiseeDescription,onChange:this.handleChange,margin:"dense",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0,classes:{outlined:t.label}},InputProps:{classes:{input:t.input,multiline:t.input}}})),u.a.createElement(m.z,{container:!0,className:S()(t.formControl),style:{flex:"9999 1 0"}},u.a.createElement(m.z,{item:!0,xs:12,sm:12,md:12,className:"flex flex-row xs:flex-col xs:mb-24"},u.a.createElement(ne,null))),u.a.createElement(m.r,{variant:"middle"})),u.a.createElement("div",{className:"flex flex-shrink flex-col w-full pl-24 pr-24 pt-0 pb-12"},u.a.createElement(U.a,{style:{alignItems:"center"},className:S()(t.formControl)},u.a.createElement(V.a,{xs:12,sm:9,md:9,className:"flex flex-col xs:flex-col xs:mb-24"},u.a.createElement("div",{className:"w-full"},u.a.createElement(m.mb,{id:"note",name:"note",label:"Note",className:t.textField,value:this.state.note,onChange:this.handleChange,margin:"dense",variant:"outlined",fullWidth:!0,multiline:!0,InputLabelProps:{shrink:!0,classes:{outlined:t.label}},InputProps:{classes:{input:t.input,multiline:t.input}},rows:3}))),u.a.createElement(V.a,{xs:12,sm:3,md:3,className:"flex flex-col xs:flex-col xs:mb-24"},u.a.createElement("div",{className:"w-full p-12 flex justify-end pb-0"},u.a.createElement("span",{className:t.summary},u.a.createElement("strong",null,"Subtotal: "),"$",this.state.subTotal.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),u.a.createElement("div",{className:"w-full p-12 flex justify-end pb-0 pt-6 "},u.a.createElement("span",{className:t.summary},u.a.createElement("strong",null,"Markup Total: "),"$",this.state.markup.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),u.a.createElement("div",{className:"w-full p-12 flex justify-end pt-6 pb-6"},u.a.createElement("span",{className:t.summary},u.a.createElement("strong",null,"Tax: "),"$",this.state.tax.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),u.a.createElement("div",{className:"w-full p-12 flex justify-end  pt-6 pb-6"},u.a.createElement("span",{className:t.summary},u.a.createElement("strong",null,"Grand Total: "),"$",this.state.total.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))))),u.a.createElement("div",{className:"flex flex-1 flex-row justify-between items-center"},u.a.createElement("div",{className:"flex flex-row justify-start"},u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement("span",{className:t.summary},u.a.createElement("strong",null,"Created By: "),"".concat(this.props.user.firstName," ").concat(this.props.user.lastName,", ").concat(pe()(r).format("MM/DD/YYYY"))))),u.a.createElement("div",{className:"flex flex-1 flex-row justify-end"},u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.c,{variant:"contained",color:"primary",className:S()(t.button,"mr-12"),onClick:function(){e.onSaveAndAddMore()}},"Save & Add more")),u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.c,{variant:"contained",color:"primary",className:S()(t.button,"mr-12"),onClick:function(){e.onSaveAndClose()}},"Save & Close")),u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.c,{variant:"contained",color:"primary",className:S()(t.button,"mr-12"),onClick:function(){e.onSubmitForApproval()}},"Submit for Approval")),u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.c,{variant:"contained",color:"primary",className:t.button,onClick:function(){e.closeComposeForm()}},"Close"))))),u.a.createElement(m.bb,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.openSnack,autoHideDuration:3e3,onClose:this.handleClose},u.a.createElement(be,{onClose:this.handleClose,variant:"error",message:this.state.snackMessage})),u.a.createElement(m.m,{open:this.state.bAlertNewTransaction,onClose:function(){return e.handleCloseNewInvoice()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement(m.q,{id:"alert-dialog-title"},"Create New Invoice"),u.a.createElement(m.o,null,u.a.createElement(m.p,{id:"alert-dialog-description"},"Do you really want to insert the new invoice?")),u.a.createElement(m.n,null,u.a.createElement(m.c,{onClick:function(){return e.handleCloseNewInvoice()},color:"primary"},"Close"),u.a.createElement(m.c,{onClick:function(){return e.addNewInvoice()},color:"primary",autoFocus:!0},"Create")))))}}]),t}(d.Component);var ye=Object(p.withStyles)(function(e){return{layoutForm:{flexDirection:"row"},button:{"& span":{textTransform:"none"}},card:{width:"100%"},container:{position:"relative",width:"100%"},formControl:{marginBottom:12,minWidth:200},textField:{marginLeft:0,marginRight:e.spacing.unit},summary:{fontSize:15,fontWeight:700},suggestionsContainerOpen:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0,maxHeight:200,overflowY:"scroll"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit},cardHeader:{backgroundColor:e.palette.secondary.main,padding:"8px 24px","& span":{color:"white",fontSize:16}},cardContent:{paddingTop:12,paddingBottom:"12px!important","& h6":{lineHeight:1.6,fontSize:14}},input:{padding:"12px 14px"},input1:{padding:"12px 6px"},label:{transform:"translate(14px, 14px) scale(1)"},inputOrange:{padding:"12px 14px",color:"orange"},dropdownMenu:{"& li":{fontSize:12,height:12}},picker:{padding:"0 6px"}}},{withTheme:!0})(Object(h.g)(Object(X.a)(function(e){var t=e.transactions,a=e.auth;return{transactionForm:t.transactionForm,newTransaction:t.newTransaction,user:a.login,regionId:a.login.defaultRegionId}},function(e){return Object(y.c)({closeEditTransactionForm:x.zc,closeNewTransactionForm:x.Fc,selectCustomer:x.Vd,resetInvoiceForm:x.Sd,addInvoice:x.qc,selectFranchisee:x.Wd},e)})(xe))),Ee=a(58),Ce=a(245),Se=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={s:"",temp:[],data:[],selection:[],selectAll:!1,selectedInvoice:null,alertOpen:!1,keyToBeRemoved:-1},a.onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n.toString()})},a.toggleSelection=function(e,t,i){var r=Object(n.a)(a.state.selection),s=r.indexOf(e);s>=0?r=[].concat(Object(n.a)(r.slice(0,s)),Object(n.a)(r.slice(s+1))):r.push(e),a.setState({selection:r})},a.isSelected=function(e){return a.state.selection.includes(e)},a.handleClose=function(){a.setState({alertOpen:!1})},a.handleOpen=function(e){a.setState({alertOpen:!0}),a.setState({keyToBeRemoved:e})},a.removeSelectedTransaction=function(){a.props.removeTransaction(a.state.keyToBeRemoved,a.props.transactions),a.state.selection.length>0&&_.a.remove(a.state.selection,function(e){return e===this.state.keyToBeRemoved}),a.setState({alertOpen:!1})},a.fetchData=a.fetchData.bind(Object(Ee.a)(Object(Ee.a)(a))),a.escFunction=a.escFunction.bind(Object(Ee.a)(Object(Ee.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.data!==e.data&&this.setState({data:this.props.data})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"escFunction",value:function(e){27===e.keyCode&&(this.setState({s:""}),this.setState({data:this.props.data}))}},{key:"fetchData",value:function(e,t){this.setState({pageSize:e.pageSize,page:e.page})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.toggleSelection,n=this.isSelected;return u.a.createElement("div",{className:S()(t.layoutTable,"flex flex-col h-full")},u.a.createElement(J.b,{data:this.state.data,minRows:0,PaginationComponent:Ce.a,onFetchData:this.fetchData,getTheadGroupProps:function(e,t,a,n){return{style:{padding:"10px 10px",fontSize:16,fontWeight:700}}},getTheadGroupThProps:function(e,t,a,n){return{style:{padding:"10px 10px",fontSize:18,fontWeight:700},className:S()("flex items-center justify-start")}},getTheadThProps:function(e,t,a,n){var i="1px solid rgba(255,255,255,.6)";return"Actions"===a.Header&&(i="none"),{style:{fontSize:"1.6rem",fontFamily:'Muli,Roboto,"Helvetica",Arial,sans-serif',fontWeight:400,lineHeight:1.75,color:"white",borderRight:i}}},getTheadProps:function(e,a,n,i){return{style:{fontSize:13},className:t.tableTheadRow}},getTdProps:function(e,t,a,n){return{style:{textAlign:"center",flexDirection:"row",fontSize:12,padding:"0"}}},getTrProps:function(e,t,a){return{className:"cursor-pointer",onClick:function(e,t){}}},columns:[{columns:[{Header:function(e){return u.a.createElement("div",null)},accessor:"",Cell:function(e){return u.a.createElement(m.h,{onClick:function(e){e.stopPropagation()},checked:n(e.value.key),onChange:function(){return a(e.value.key)}})},className:"justify-center",sortable:!1,width:48}],className:S()("justify-center")},{columns:[{Header:"Fran. #",accessor:"FranchiseeNo",filterAll:!0,width:100,className:S()(t.tableTdEven,"flex items-center  justify-center")},{Header:"Number",accessor:"Number",filterAll:!0,width:80,className:S()(t.tableTdEven,"flex items-center  justify-center")},{Header:"Description",accessor:"Description",className:S()("flex items-center  justify-start p-12-impor")},{Header:"Name",accessor:"Name",className:S()(t.tableTdEven,"flex items-center  justify-center"),width:160},{Header:"Ext. Price",accessor:"ExtendedPrice",Cell:function(e){return"$"+parseFloat(e.original.ExtendedPrice).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:S()(t.tableTdEven,"flex items-center  justify-end p-12-impor"),width:100},{Header:"Tax",accessor:"Tax",Cell:function(e){return"$"+parseFloat(e.original.Tax).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:S()(t.tableTdEven,"flex items-center  justify-end p-12-impor"),width:80},{Header:"Fees",accessor:"Fees",Cell:function(e){return"$"+parseFloat(e.original.Fees).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:S()(t.tableTdEven,"flex items-center  justify-end p-12-impor"),width:80},{Header:"Total",Cell:function(e){return"$"+parseFloat(e.original.TotalTrxAmount).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},accessor:"TotalTrxAmount",className:S()("flex items-center  justify-end p-12-impor"),width:120},{Header:"Trx Date",accessor:"TrxDate",className:S()(t.tableTdEven,"flex items-center  justify-center"),width:100},{Header:"TrxType",accessor:"TrxType",className:S()(t.tableTdEven,"flex items-center  justify-center"),width:70},{Header:"Status",accessor:"Status",className:S()(t.tableTdEven,"flex items-center  justify-center"),width:80},{Header:"Actions",width:100,Cell:function(t){return u.a.createElement("div",{className:"flex items-center actions justify-center w-full"},u.a.createElement(m.F,{onClick:function(a){a.stopPropagation(),e.handleOpen(t.original.key)}},u.a.createElement(m.E,{fontSize:"small"},"delete")),u.a.createElement(m.F,{onClick:function(e){e.stopPropagation()}},u.a.createElement(m.E,{fontSize:"small"},"edit")))}}]}],defaultPageSize:100,className:S()("-striped -highlight"),totalRecords:this.state.data.length,style:{height:"100%"}}),u.a.createElement(m.m,{open:this.state.alertOpen,onClose:function(){return e.handleClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement(m.q,{id:"alert-dialog-title"},"Remove Transaction"),u.a.createElement(m.o,null,u.a.createElement(m.p,{id:"alert-dialog-description"},"Do you really want to remove the selected transaction?")),u.a.createElement(m.n,null,u.a.createElement(m.c,{onClick:function(){return e.handleClose()},color:"primary"},"Disagree"),u.a.createElement(m.c,{onClick:function(){return e.removeSelectedTransaction()},color:"primary",autoFocus:!0},"Agree"))))}}]),t}(d.Component);var we=Object(p.withStyles)(function(e){return{layoutTable:{flexDirection:"row","& .z-9999":{height:64},"& .-pageSizeOptions":{display:"none"},"& .openFilter":{width:"inherit"},"& .openSummary":{width:300},"& .p-12-impor":{paddingLeft:"1.2rem!important",paddingRight:"1.2rem!important"},"& .ReactTable .rt-noData":{top:"250px",border:"1px solid coral"},"& .ReactTable .rt-thead.-headerGroups":{display:"none"},"& .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover":{background:"rgba("+Se(e.palette.secondary.main).r+","+Se(e.palette.secondary.main).g+","+Se(e.palette.secondary.main).b+", .8)",color:"white!important"},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead.-header":{flex:"0 0 auto",overflowY:"scroll"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead.-headerGroups .rt-th:nth-child(2)":{width:"inherit!important",minWidth:"inherit!important"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-end"}},content:{position:"relative"},tableTheadRow:{backgroundColor:e.palette.primary.main},tableThEven:{backgroundColor:"rgba("+Se(e.palette.secondary.main).r+","+Se(e.palette.secondary.main).g+","+Se(e.palette.secondary.main).b+", .3)"},tableTdEven:{},imageIcon:{width:24}}},{withTheme:!0})(Object(h.g)(Object(X.a)(function(e){var t=e.transactions;return{regionId:e.auth.login.defaultRegionId,transactions:t.transactionsDB}},function(e){return Object(y.c)({toggleFilterPanel:x.me,removeTransaction:x.Rd},e)})(ke))),Ne=(a(1658),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={s:"",data:[],selection:[],regionId:0,checkedCompleted:!0,checkedOpen:!0,selectedTransaction:null,franchisees:null},a.search=function(e){var t=a.state.data.filter(function(t){return console.log("value=",t),-1!==t.Name.indexOf(e)||!e||-1!==t.FranchiseeNo.indexOf(e)||-1!==t.Number.indexOf(e)||-1!==t.ExtendedPrice.toString().indexOf(e)||-1!==t.Tax.toString().indexOf(e)||-1!==t.Fees.toString().indexOf(e)||-1!==t.TotalTrxAmount.toString().indexOf(e)});a.setState({temp:t})},a.handleChange=function(e){return function(t){a.setState(Object(c.a)({},e,t.target.value))}},a.onNewTransaction=function(){a.props.filterState&&a.props.toggleFilterPanel(),a.props.openNewTransactionForm()},a.getTransactions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.transactions;if(null!==e.transactionsDB){var t=e.transactionsDB.Data.FranchiseeTransactions,i=[],r=[],s=["Open","Completed"];["checkedOpen","checkedCompleted"].map(function(e,o){return a.props.transactionStatus[e]&&(i=t.filter(function(e){return e.Status.toLowerCase()===s[o].toLowerCase()})),r=_.a.uniq([].concat(Object(n.a)(r),Object(n.a)(i))),!0}),a.setState({temp:r}),a.setState({data:r})}},e.bLoadedTransactions||e.getTransactions(),e.bLoadedFranchisees||e.getFranchisees(e.regionId,e.fstatusId,e.fLocation,e.fLongitude,e.fLatitude,e.fSearchText),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.regionId,a=e.fstatusId,n=e.fLocation,i=e.fLongitude,r=e.fLatitude,s=e.fSearchText;this.setState({checkedCompleted:this.props.transactionStatus.checkedCompleted}),this.setState({checkedOpen:this.props.transactionStatus.checkedOpen}),this.getTransactions(),this.props.getFranchisees(t,a,n,i,r,s)}},{key:"componentDidUpdate",value:function(e,t,a){var n=!1,i=this.props,r=i.fstatusId,s=i.fLocation,o=i.fLongitude,l=i.fLatitude,c=i.fSearchText;this.props.regionId!==e.regionId&&(this.setState({regionId:e.regionId}),n=!0),this.props.transactionStatus.checkedCompleted!==e.transactionStatus.checkedCompleted&&(this.setState({checkedCompleted:!this.state.checkedCompleted}),n=!0),this.props.transactionStatus.checkedOpen!==e.transactionStatus.checkedOpen&&(this.setState({checkedOpen:!this.state.checkedOpen}),n=!0),this.props.regionId!==e.regionId&&this.props.getFranchisees(this.props.regionId,r,s,o,l,c),n&&this.getTransactions(),e.transactions!==this.props.transactions&&this.getTransactions(),t.s!==this.state.s&&this.search(this.state.s)}},{key:"componentWillReceiveProps",value:function(e){this.props.transactions!==e.transactions&&this.getTransactions(e.transactions),null!==e.franchisees&&this.props.franchisees!==e.franchisees&&this.setState({franchisees:e.franchisees.Data.Region[0].FranchiseeList})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.filterState,i=t.toggleFilterPanel,r=t.transactionForm;this.state.selection;return u.a.createElement(u.a.Fragment,null,u.a.createElement(N.m,{classes:{root:a.layoutRoot,header:a.layoutHeader,content:a.content,leftSidebar:S()(a.layoutLeftSidebar,{openFilter:n}),sidebarHeader:a.layoutSidebarHeader},leftSidebarHeader:u.a.createElement("div",{className:S()("flex flex-row w-full h-full justify-between p-12 align-middle pr-0",{filteropen:n})},u.a.createElement("h4",{style:{marginBlockStart:"1em"}},"Filter Panel"),u.a.createElement(N.a,{animation:"transition.expandIn",delay:200},u.a.createElement("div",null,u.a.createElement(m.D,{xsDown:!0},u.a.createElement(m.F,{onClick:function(e){return i()}},u.a.createElement(m.E,null,"close")))))),leftSidebarContent:u.a.createElement(w,null),header:u.a.createElement("div",{className:"flex w-full items-center"},this.state.temp&&!r.props.open&&u.a.createElement("div",{className:"flex row flex-1  p-8 sm:p-12 relative justify-between"},u.a.createElement("div",{className:"flex flex-row flex-1 justify-between"},u.a.createElement("div",{className:"flex flex-shrink items-center"},u.a.createElement("div",{className:"flex items-center"},u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.E,{className:"text-32 mr-12"},"account_box")),u.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(m.pb,{variant:"h6",className:"hidden sm:flex"},"Franchisees | Transactions")))),u.a.createElement("div",{className:"flex flex-shrink items-center"},u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.t,{color:"secondary","aria-label":"add",className:S()(a.sideButton,"mr-12"),onClick:function(){return e.onNewTransaction()}},u.a.createElement(m.E,null,"add"))),u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.t,{color:"secondary","aria-label":"add",className:S()(a.sideButton,"mr-12"),onClick:function(){return e.props.history.push("/apps/mail/inbox")}},u.a.createElement(m.E,null,"mail_outline"))),u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.t,{color:"secondary","aria-label":"add",className:a.sideButton,onClick:function(){return alert("ok")}},u.a.createElement(m.E,null,"print")))))),this.state.temp&&r.props.open&&u.a.createElement("div",{className:"flex row flex-1  p-8 sm:p-12 relative justify-between"},u.a.createElement("div",{className:"flex flex-row flex-1 justify-between"},u.a.createElement("div",{className:"flex flex-shrink items-center"},u.a.createElement("div",{className:"flex items-center"},u.a.createElement(N.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.nb,{className:"pl-12 pr-0"},u.a.createElement("img",{className:"mr-12",src:"assets/images/invoices/invoice-icon-white.png",alt:"new transaction",style:{width:32,height:32}}))),"edit"===this.props.transactionForm.type&&u.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(m.pb,{variant:"h6",className:"hidden sm:flex"},"Franchisees | Edit Transaction")),"new"===this.props.transactionForm.type&&u.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(m.pb,{variant:"h6",className:"hidden sm:flex"},"Franchisees | New Transaction"))))))),content:u.a.createElement("div",{className:"flex-1 flex-col absolute w-full h-full"},this.state.temp&&!r.props.open&&u.a.createElement("div",{className:S()("flex flex-col h-full")},u.a.createElement("div",{className:"flex flex-row items-center p-12"},u.a.createElement("div",{className:"flex justify-start items-center"},u.a.createElement(m.D,{smDown:!0},u.a.createElement(m.c,{onClick:function(e){return i()},"aria-label":"toggle filter panel",color:"secondary",disabled:!!n,className:S()(a.filterPanelButton)},u.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"}))),u.a.createElement(m.D,{smUp:!0},u.a.createElement(m.c,{onClick:function(t){return e.pageLayout.toggleLeftSidebar()},"aria-label":"toggle filter panel",className:S()(a.filterPanelButton)},u.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"})))),u.a.createElement("div",{className:"flex items-center w-full h-44 mr-12 ml-12"},u.a.createElement(m.V,{className:"flex items-center h-44 w-full lg:mr-12 xs:mr-0",elevation:1},u.a.createElement(m.G,{placeholder:"Search...",className:S()(a.search,"pl-16"),disableUnderline:!0,fullWidth:!0,value:this.state.s,onChange:this.handleChange("s"),inputProps:{"aria-label":"Search"}}),u.a.createElement(m.E,{color:"action",className:"mr-16"},"search")))),u.a.createElement(we,{data:this.state.temp})),this.state.temp&&r.props.open&&u.a.createElement(ye,{franchisees:this.state.franchisees,selectedTransaction:this.state.selectedTransaction})),onRef:function(t){e.pageLayout=t}}),this.props.bFranchiseesFetchStart&&u.a.createElement("div",{className:a.overlay},u.a.createElement(m.j,{className:a.progress,color:"secondary"})))}}]),t}(d.Component));t.default=Object(p.withStyles)(function(e){return{layoutRoot:{flexDirection:"row","& .z-9999":{height:64},"& .openFilter":{width:"inherit"}},layoutHeader:{height:80,minHeight:80,backgroundColor:e.palette.secondary.main},layoutLeftSidebar:Object(c.a)({width:0},e.breakpoints.down("sm"),{width:"inherit"}),layoutSidebarHeader:{height:80,minHeight:80,display:"flex",alignItems:"center",backgroundColor:e.palette.secondary.main},content:{position:"relative"},search:Object(c.a)({width:"100%"},e.breakpoints.down("sm"),{width:"100%"}),filterPanelButton:{backgroundColor:e.palette.secondary.main,minWidth:42,padding:8,justifyContent:"center","&:hover":{backgroundColor:e.palette.primary.dark}},sideButton:{backgroundColor:e.palette.primary.light,height:46,width:46,"&:hover":{backgroundColor:e.palette.primary.dark}},tableTheadRow:{backgroundColor:e.palette.primary.main,padding:12},imageIcon:{width:24},overlay:{position:"absolute",top:0,left:0,width:"100%",height:"100vh",backgroundColor:"rgba(0,0,0, .9)",zIndex:1e3,alignItems:"center",justifyContent:"center",display:"flex",opacity:.5},progress:{margin:2*e.spacing.unit}}},{withTheme:!0})(Object(h.g)(Object(X.a)(function(e){var t=e.transactions,a=e.auth,n=e.franchisees;return{transactions:t,transactionForm:t.transactionForm,bLoadedTransactions:t.bLoadedTransactions,filterState:t.bOpenedTransactionFilterPanel,transactionStatus:t.transactionStatus,regionId:a.login.defaultRegionId,bLoadedFranchisees:n.bLoadedFranchisees,franchisees:n.franchiseesDB,fstatusId:n.statusId,fLocation:n.Location,fLongitude:n.Longitude,fLatitude:n.Latitude,fSearchText:n.SearchText,bFranchiseesFetchStart:n.bFranchiseesFetchStart}},function(e){return Object(y.c)({getTransactions:x.qd,toggleFilterPanel:x.me,openNewTransactionForm:x.Jd,openEditTransactionForm:x.Cd,getFranchisees:x.fd},e)})(Ne)))}}]);
//# sourceMappingURL=16.456c82b7.chunk.js.map