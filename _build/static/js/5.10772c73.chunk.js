(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1565:function(e,t,a){"use strict";var n=a(173);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),s=(0,n(a(208)).default)(i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Cancel");t.default=s},1658:function(e,t,a){"use strict";var n=a(12),i=a(3),s=a(9),o=a(15),l=a(19),r=a(17),c=a(18),u=a(61),m=a(0),d=a.n(m),p=a(167),g=a(1),h=a(218),f=a(114),v=a(210),b=a.n(v),x=a(149),C=a.n(x),S=a(250),E=a.n(S),y=a(252),N=a.n(y),I=a(253),O=a.n(I),w=a(254),T=a.n(w),D=a(251),k=a.n(D),F=a(7),j=a(10),P=a(328),L=a(209),R=a(13),A=a(31),B=a.n(A),M=a(4),z=a.n(M),V=a(127),Y=(a(172),a(179)),q=a.n(Y),H=a(618),W=a(69),_=a.n(W),U=a(260),J=a.n(U),$=a(76),G=a.n($),Q=(a(458),a(456)),X=a.n(Q);a(1565);function K(e){return d.a.createElement(_.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)}function Z(e){var t=e.inputRef,a=Object(u.a)(e,["inputRef"]);return d.a.createElement("div",Object.assign({ref:t},a))}function ee(e){return d.a.createElement(J.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:Z,inputProps:Object(i.a)({className:e.selectProps.classes.input1,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))}function te(e){return d.a.createElement(X.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?700:400,fontSize:12}},e.innerProps),e.children)}function ae(e){return d.a.createElement(_.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)}function ne(e){return d.a.createElement(_.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)}function ie(e){return d.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}function se(e){return d.a.createElement(G.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)}var oe=a(24),le=a(73),re=a(5),ce=a(65),ue=a.n(ce),me=a(122),de=a(103),pe={success:E.a,warning:k.a,error:N.a,info:O.a};var ge=Object(j.withStyles)(function(e){return{success:{backgroundColor:b.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,s=e.variant,o=Object(u.a)(e,["classes","className","message","onClose","variant"]),l=pe[s];return d.a.createElement(g.cb,Object.assign({className:z()(t[s],a),"aria-describedby":"client-snackbar",message:d.a.createElement("span",{id:"client-snackbar",className:t.message},d.a.createElement(l,{className:z()(t.icon,t.iconVariant)}),n),action:[d.a.createElement(g.F,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},d.a.createElement(T.a,{className:t.icon}))]},o))}),he=0;function fe(e,t){return{id:e,fid:t,fnumber:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",name:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",amount:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,type:"franch"}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Regular Billing",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Adjust-Balance",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;return{id:he++,billing:e,service:t,description:a,quantity:n,amount:i,tax:s,markup:o,markupAmount:c,markupTax:u,extended:l,total:r,franchisees:[],type:"line"}}function be(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,i=e.ref,s=Object(u.a)(e,["classes","inputRef","ref"]);return d.a.createElement(g.mb,Object.assign({fullWidth:!0,InputProps:{inputRef:function(e){i(e),n(e)},classes:{input:t.input}}},s))}function xe(e,t){var a=t.isHighlighted;return d.a.createElement(g.R,{selected:a,component:"div"},d.a.createElement("span",null,e.Number," - ",e.Name))}var Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={order:"asc",selected:[],data:"new"===a.props.invoiceForm.type?[ve({label:a.props.billingLists[0].Name,value:a.props.billingLists[0].BillingTypeId},"Adjust-Balance","","")]:[],page:0,rowsPerPage:10,labelWidth:0,openSnack:!1,snackMessage:"Please fill the data",nameValue0:"",nameValue1:"",nameValue2:"",nameValue3:"",nameValue4:"",nameValue5:"",nameValue6:"",nameValue7:"",nameValue8:"",nameValue9:"",nameValue10:"",nameValue11:"",nameValue12:"",nameValue13:"",nameValue14:"",nameValue15:"",nameValue16:"",nameValue17:"",nameValue18:"",nameValue19:"",nameValue20:"",nameSuggestions:[],numberSuggestions:[],taxRowId:0,customerTaxAmountLine:null,selectedBillingOption0:{label:a.props.billingLists[0].Name,value:a.props.billingLists[0].BillingTypeId},selectedBillingOption1:null,selectedBillingOption2:null,selectedBillingOption3:null,selectedBillingOption4:null,selectedBillingOption5:null,selectedBillingOption6:null,selectedBillingOption7:null,selectedBillingOption8:null,selectedBillingOption9:null,selectedBillingOption10:null,selectedBillingOption11:null,selectedBillingOption12:null,selectedBillingOption13:null,selectedBillingOption14:null,selectedBillingOption15:null,selectedServiceOption0:null,selectedServiceOption1:null,selectedServiceOption2:null,selectedServiceOption3:null,selectedServiceOption4:null,selectedServiceOption5:null,selectedServiceOption6:null,selectedServiceOption7:null,selectedServiceOption8:null,selectedServiceOption9:null,selectedServiceOption10:null,selectedServiceOption11:null,selectedServiceOption12:null,selectedServiceOption13:null,selectedServiceOption14:null,selectedServiceOption15:null,bTaxAlert:!1,bTaxAlertReduction:!1,bAllowAlertReduction:!1,billingSuggestions:a.props.billingLists.map(function(e){return{value:e.BillingTypeId,label:e.Name}}),serviceSuggestions:a.props.serviceLists.map(function(e){return{BillingTypeId:e.BillingTypeId,label:e.Name,value:e.Name}})},a.handleChangeBilling=function(e,t){var n=a.state.data.map(function(a){var n=a;return t.id===a.id&&(n[e.target.name]=e.target.value),n});a.setState({data:n})},a.updateTaxFromLine=function(){var e=Object(n.a)(a.state.data),t=a.state,i=t.taxRowId,s=t.customerTaxAmountLine;e[i].tax=s.TotalTaxAmount,e[i].extended=s.ExtendedPrice,e[i].total=s.TotalAmount,e[i].markupAmount=s.MarkupAmount,e[i].markupTax=s.MarkupTax,a.setState({data:e}),a.setState({bAllowAlertReduction:!0})},a.getSuggestions=function(e){var t=Object(me.e)(e.trim()),n=new RegExp("^"+t,"i");return a.props.franchisees.Data.Region[0].FranchiseeList.filter(function(e){return n.test(e.Number)||n.test(e.Name)})},a.getSuggestionfName=function(e){return e.Name},a.onNameChange=function(e){return function(t,i){var s=i.newValue;a.setState(Object(R.a)({},"nameValue"+e.f_index,s));var o=Object(n.a)(a.state.data);o[e.id].franchisees[e.fid].name=s,a.setState({data:o})}},a.onNameSuggestionsFetchRequested=function(e){var t=e.value;a.setState({nameSuggestions:a.getSuggestions(t)})},a.onNameSuggestionsClearRequested=function(){a.setState({nameSuggestions:[]})},a.onNameSuggestionSelected=function(e){return function(t,i){var s=i.suggestion,o=Object(n.a)(a.state.data);o[e.id].franchisees[e.fid].fnumber=s.Number,a.setState({data:o})}},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({openSnack:!1})},a.handleTaxAlertClose=function(){a.setState({bTaxAlert:!1})},a.handleTaxAlertReductionClose=function(){a.setState({bTaxAlertReduction:!1})},a.addLineData=function(e){if(null===a.props.invoiceForm.customer)return a.setState({snackMessage:"Please choose customer from Invoice suggestion"}),void a.setState({openSnack:!0});if(""===e.description)return a.setState({snackMessage:"Please enter description"}),void a.setState({openSnack:!0});if(""===e.quantity)return a.setState({snackMessage:"Please enter quantity"}),void a.setState({openSnack:!0});if(""===e.amount)return a.setState({snackMessage:"Please enter amount"}),void a.setState({openSnack:!0});var t=[].concat(Object(n.a)(a.state.data),[ve({label:a.props.billingLists[0].Name,value:a.props.billingLists[0].BillingTypeId})]);a.setState(Object(R.a)({},"selectedBillingOption"+parseInt(t.length-1),{label:a.props.billingLists[0].Name,value:a.props.billingLists[0].BillingTypeId}));var i=0,s=t.map(function(e){return e.id=i++,e});a.setState({data:s})},a.addFranchiseeLine=function(e){var t=Object(n.a)(a.state.data),i=fe(e.id,e.franchisees.length);e.franchisees=[].concat(Object(n.a)(e.franchisees),[i]);var s=t.map(function(t){return t.id===e.id&&(t=e),t});a.setState({data:s})},a.removeLineData=function(e){var t=Object(n.a)(a.state.data);B.a.remove(t,function(t){return t.id===e.id});var i=0,s=t.map(function(e){return e.id=i++,e});a.setState({data:s})},a.removeFranch=function(e){var t=Object(n.a)(a.state.data);t.forEach(function(t){if(t.franchisees.length>0&&t.id===e.id){var a=t.franchisees;B.a.remove(a,function(t){return t.fid===e.fid})}}),t.forEach(function(t){if(t.franchisees.length>0&&t.id===e.fid){var a=0,n=t.franchisees.map(function(e){return e.fid=a++,e});t.franchisees=n}}),a.setState({data:t}),a.setState(Object(R.a)({},"nameValue"+e.f_index,""))},a.getInvoiceLineTaxAmount=function(e){if(!a.isDisable(e)){var t=0;""!==e.markup&&(t=e.markup),a.props.getCustomerTaxAmount(a.props.regionId,a.props.invoiceForm.customer.CustomerId,e.amount,e.quantity,t),a.setState({taxRowId:e.id})}},a.handleChange=function(e){return function(t){var i=Object(n.a)(a.state.data);i[e.id].franchisees[e.fid].amount=parseFloat(t.target.value),a.setState({data:i})}},a.handleChangeDesc=function(e){return function(t){var i=Object(n.a)(a.state.data);i[e.id].description=t.target.value,a.setState({data:i})}},a.handleChangeInvoiceLine=function(e,t){return function(i){var s=Object(n.a)(a.state.data),o=i.target.value;"amount"===t&&(o=parseFloat(o)),"quantity"===t&&(o=parseInt(o)),s[e.id][t]=o,a.setState({data:s}),a.isDisable(e)||"tax"===t||a.getInvoiceLineTaxAmount(e)}},a.handleChangeInvoiceTaxLine=function(e,t){return function(i){var s=Object(n.a)(a.state.data);null!==a.props.invoiceForm.customer&&("N"!==a.props.invoiceForm.customer.TaxExempt||"tax"!==t||0!==parseFloat(i.target.value)?(a.state.bAllowAlertReduction&&"N"===a.props.invoiceForm.customer.TaxExempt&&"tax"===t&&0!==parseFloat(i.target.value)&&(parseFloat(i.target.value),parseFloat(s[e.id][t])),s[e.id][t]=i.target.value,a.setState({data:s}),a.isDisable(e)||"tax"===t||a.getInvoiceLineTaxAmount(e)):a.setState({bTaxAlert:!0}))}},a.isDisable=function(e){return null===a.props.invoiceForm.customer?(a.setState({snackMessage:"Please choose customer from Invoice suggestion"}),a.setState({openSnack:!0}),!0):""===e.quantity||(""===e.amount||void 0)},a.handleBillingChange=function(e,t){a.setState(Object(R.a)({},"selectedBillingOption"+t.id,e));var i=Object(n.a)(a.state.data);i[t.id].billing=e,a.setState({data:i})},a.handleServiceChange=function(e,t){a.setState(Object(R.a)({},"selectedServiceOption"+t.id,e));var i=Object(n.a)(a.state.data);i[t.id].service=e,a.setState({data:i})},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.updateInvoiceLine(this.state.data)}},{key:"componentWillUnmount",value:function(){}},{key:"addInvoiceLineFunction",value:function(e){"enter"===ue()(e)||ue()(e)}},{key:"componentDidMount",value:function(){var e=this;if(document.addEventListener("keydown",this.addInvoiceLineFunction,!1),"new"===this.props.invoiceForm.type){var t=0,a=Object(n.a)(this.state.data).map(function(e){return e.id=t++,e});this.setState({data:a})}else{console.log("edit");var i=this.props.invoiceDetail.Data.Items,s=this.props.billingLists.map(function(e){return{value:e.BillingTypeId,label:e.Name}}),o=this.props.serviceLists.map(function(e){return{label:e.Name,value:e.Name}});if(i.length>0){var l=i.map(function(t,a){var n=s.filter(function(e){return e.value===parseInt(t.Billing)});e.setState(Object(R.a)({},"selectedBillingOption".concat(a),n[0]));var i=o.filter(function(e){return e.value===t.Service});i.length&&e.setState(Object(R.a)({},"selectedServiceOption".concat(a),i[0].label));var l=ve(n[0],i.length?i[0].label:"",t.Description,t.Quantity,t.UnitPrice,t.TaxRate,5,t.ExtendedPrice,t.Total,t.MarkUpTotal),r=[];return t.Distribution.length>0&&(r=t.Distribution.map(function(e,t){return{id:a,fid:t,fnumber:e.FranchiseeNumber,amount:e.Amount,name:e.name,type:"franch"}})),l.franchisees=r,l});this.setState({data:l})}}}},{key:"componentDidUpdate",value:function(e,t,a){var i=this;if(null!==this.state.data&&t.data!==this.state.data&&this.props.updateInvoiceLine(this.state.data),JSON.stringify(this.state.customerTaxAmountLine)!==JSON.stringify(t.customerTaxAmountLine)&&this.updateTaxFromLine(),null!==this.props.fn&&e.fn!==this.props.fn){var s=[],o=this.props.franchisees.Data.Region[0].FranchiseeList;if(this.props.fn.forEach(function(e){s=B.a.filter(o,function(t){return e.Number===t.Number&&e.Name===t.Name})}),s.length>0){var l=Object(n.a)(this.state.data)[0],r=0;s.forEach(function(e){var t=fe(0,r,e.Number,e.Name,e.DistributionAmount);l.franchisees=[].concat(Object(n.a)(l.franchisees),[t]),i.setState(Object(R.a)({},"nameValue"+r,e.Name)),r++})}}}},{key:"componentWillReceiveProps",value:function(e){if(JSON.stringify(this.props.customerTaxAmountLine)!==JSON.stringify(e.customerTaxAmountLine)&&this.setState({customerTaxAmountLine:e.customerTaxAmountLine}),null===e.invoiceForm.data&&JSON.stringify(e.invoiceForm.data)!==JSON.stringify(this.props.invoiceForm.data)){var t=ve({label:this.props.billingLists[0].Name,value:this.props.billingLists[0].BillingTypeId},"Adjust-Balance","","");this.setState({data:[Object(i.a)({},t,{id:0})]})}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.data,n={Control:ee,Menu:se,NoOptionsMessage:K,Option:te,Placeholder:ae,SingleValue:ne,ValueContainer:ie},s={input:function(e){return Object(i.a)({},e,{"& input":{font:"inherit"}})}},o=this.state.nameSuggestions,l=[],r=0;a.forEach(function(e){if(0===e.franchisees.length)return l.push(e);var t=e.franchisees;l.push(e),t.forEach(function(e){l.push(Object(i.a)({f_index:r++},e))})});var c=[];null!==this.props.billingLists&&this.props.billingLists.length>0&&(c=this.props.billingLists.map(function(e){return{value:e.BillingTypeId,label:e.Name}}));var u=this.props.serviceLists.map(function(e){return{value:e.Name,label:e.Name}});return console.log("state====",this.state),d.a.createElement(g.V,{className:z()(t.root)},d.a.createElement("div",{className:z()(t.tableWrapper,"flex flex-col h-full")},d.a.createElement(V.b,{data:l,minRows:0,showPagination:!1,getTheadThProps:function(e,t,a,n){var i="1px solid rgba(255,255,255,.6)";return"Action"===a.Header&&(i="none"),{style:{fontSize:13,fontFamily:'Muli,Roboto,"Helvetica",Arial,sans-serif',fontWeight:400,lineHeight:2,color:"white",borderRight:i}}},getTheadProps:function(e,a,n,i){return{style:{fontSize:13},className:t.tableTheadRow}},getTdProps:function(e,t,a,n){return"franch"===t.original.type?"Qty"===a.Header||"Amount"===a.Header||"Markup(%)"===a.Header?{style:{display:"none"},className:{}}:{className:z()({"justify-end":"Service"===a.Header},{"justify-start":"extended"===a.id},{franchiRow:"description"===a.id},{taxColumn:"tax"===a.id})}:{className:z()({"justify-end":"extended"===a.id},{"justify-end":"line"!==t.original.type})}},columns:[{columns:[{Header:"Billing",accessor:"billing",Cell:function(a){return"line"===a.original.type?d.a.createElement("div",{className:t.root1},d.a.createElement(g.T,null,d.a.createElement(H.a,{classes:t,styles:s,value:e.state["selectedBillingOption"+a.original.id],components:n,onChange:function(t){return e.handleBillingChange(t,a.original)},options:c,placeholder:"Select a billing"}))):d.a.createElement("div",null)},width:200,className:z()(t.billingSuggestion,"flex items-center justify-center")},{Header:"Service",accessor:"service",Cell:function(a){return"line"===a.original.type?d.a.createElement("div",{className:t.root1},d.a.createElement(g.T,null,d.a.createElement(H.a,{classes:t,styles:s,value:e.state["selectedServiceOption"+a.original.id],components:n,onChange:function(t){return e.handleServiceChange(t,a.original)},options:u,placeholder:"Select a service"}))):d.a.createElement("div",{className:z()(t.distribution)},d.a.createElement("span",null,"Distribution"))},width:200,className:z()(t.tableTdEven,"flex items-center")},{Header:"Description",accessor:"description",Cell:function(a){return"line"===a.original.type?d.a.createElement(g.mb,{id:"description",style:{margin:8},placeholder:"Description",fullWidth:!0,value:a.original.description,onChange:e.handleChangeDesc(a.original),margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:t.input}}}):d.a.createElement("div",{className:z()("flex flex-row w-full justify-start")},d.a.createElement("div",{className:"f1"},a.original.fnumber),d.a.createElement("div",{className:"f2"},d.a.createElement(q.a,{renderInputComponent:be,suggestions:o,onSuggestionsFetchRequested:e.onNameSuggestionsFetchRequested,onSuggestionsClearRequested:e.onNameSuggestionsClearRequested,onSuggestionSelected:e.onNameSuggestionSelected(a.original),getSuggestionValue:e.getSuggestionfName,renderSuggestion:xe,inputProps:{classes:t,placeholder:"Search Franchisee Name or Number",value:e.state["nameValue"+a.original.f_index],onChange:e.onNameChange(a.original)},theme:{container:z()(t.container),suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderSuggestionsContainer:function(e){return d.a.createElement(g.V,Object.assign({},e.containerProps,{square:!0}),e.children)}})))}},{Header:"Qty",accessor:"quantity",Cell:function(a){return"line"===a.original.type?d.a.createElement(g.mb,{className:t.fInput,placeholder:"Qty",value:a.original.quantity,onBlur:e.handleChangeInvoiceLine(a.original,"quantity"),InputProps:{inputComponent:me.b,classes:{input:t.input}}}):d.a.createElement("div",null)},className:z()(t.tableTdEven,"flex items-center  justify-center text-center"),width:60},{Header:"Amount",accessor:"amount",Cell:function(a){return"line"===a.original.type?d.a.createElement(g.mb,{className:t.fInput,placeholder:"Amount",value:a.original.amount,onBlur:e.handleChangeInvoiceLine(a.original,"amount"),InputProps:{inputComponent:me.c,classes:{input:t.input}}}):d.a.createElement("div",null)},className:z()(t.tableTdEven,"flex items-center  justify-center text-right"),width:100},{Header:"Tax",accessor:"tax",Cell:function(a){return"line"===a.original.type?d.a.createElement(g.mb,{className:t.fInput,placeholder:"Tax",value:a.original.tax,onChange:e.handleChangeInvoiceTaxLine(a.original,"tax"),InputProps:{inputComponent:me.a,classes:{input:t.input}}}):d.a.createElement("div",{className:z()("flex flex-row w-full justify-end")},d.a.createElement(g.mb,{className:t.fInput,placeholder:"Amount",value:a.original.amount,onChange:e.handleChange(a.original),InputProps:{inputComponent:me.a}}))},className:z()(t.tableTdEven,"flex items-center  justify-end text-right"),width:80},{Header:"Markup(%)",accessor:"markup",Cell:function(a){return"line"===a.original.type?d.a.createElement(g.mb,{className:t.fInput,placeholder:"Markup",value:a.original.markup,onChange:e.handleChangeInvoiceLine(a.original,"markup"),InputProps:{inputComponent:me.d,readOnly:2!==a.original.billing.value,classes:{input:t.input}}}):d.a.createElement("div",null)},className:z()(t.tableTdEven,"flex items-center  text-right justify-end"),width:80},{Header:"Ext. Amount",accessor:"extended",Cell:function(a){if("line"===a.original.type){var n=0;return""!==a.original.markup&&(n=a.original.markup),"$"+parseFloat(a.original.total*(1+parseFloat(n)/100)).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}return d.a.createElement(g.t,{"aria-label":"remove",onClick:function(){return e.removeFranch(a.original)},className:z()(t.lineCancelButton,"mr-12"),style:{width:24,height:24,minHeight:24}},d.a.createElement(g.E,null,"close"))},className:z()(t.tableTdEven,"flex items-center  w-full text-center pr-12"),width:100},{Header:"Action",width:130,Cell:function(a){return"line"===a.original.type?d.a.createElement("div",{className:"flex flex-row items-center w-full justify-center"},d.a.createElement(g.t,{color:"secondary","aria-label":"add",className:z()(t.lineButton,"mr-8"),onClick:function(){return e.addFranchiseeLine(a.original)}},d.a.createElement(g.E,null,"call_merge")),d.a.createElement(g.t,{color:"secondary","aria-label":"add",className:z()(t.lineButton,"mr-8"),onClick:function(){return e.addLineData(a.original)}},d.a.createElement(g.E,null,"add")),e.state.data.length>1&&d.a.createElement(g.t,{"aria-label":"remove",onClick:function(){return e.removeLineData(a.original)},className:z()(t.lineCancelButton,"mr-0")},d.a.createElement(g.E,null,"close"))):d.a.createElement("div",null)}}]}],className:z()("-striped -highlight"),defaultPageSize:200,style:{height:"100%"}})),d.a.createElement(g.bb,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.openSnack,autoHideDuration:3e3,onClose:this.handleClose},d.a.createElement(ge,{onClose:this.handleClose,variant:"error",message:this.state.snackMessage})),d.a.createElement(g.m,{open:this.state.bTaxAlert,onClose:this.handleTaxAlertClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.a.createElement(g.q,{id:"alert-dialog-title"},"Customer is not Tax Exempt"),d.a.createElement(g.o,null,d.a.createElement(g.p,{id:"alert-dialog-description"},'Customer is not Tax Exempt, but will be allowed as transaction is ???"')),d.a.createElement(g.n,null,d.a.createElement(g.c,{onClick:this.handleTaxAlertClose,color:"primary",autoFocus:!0},"Close"))),d.a.createElement(g.m,{open:this.state.bTaxAlertReduction,onClose:this.handleTaxAlertReductionClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.a.createElement(g.q,{id:"alert-dialog-title"},"Tax Editing is not allowed"),d.a.createElement(g.o,null,d.a.createElement(g.p,{id:"alert-dialog-description"},"Tax Editing is not allowed. Tax is calculated based on Customer Tax Settings")),d.a.createElement(g.n,null,d.a.createElement(g.c,{onClick:this.handleTaxAlertReductionClose,color:"primary",autoFocus:!0},"Close"))))}}]),t}(d.a.Component);var Se=Object(j.withStyles)(function(e){var t,a;return{root:{width:"100%",marginTop:e.spacing.unit,head:{color:"black"},"& .ReactTable .rt-thead.-headerGroups":{display:"none"},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-td":{padding:"0 5px"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-end"},"& .franchiRow":{"& .f1":{width:"100px",minWidth:100,padding:"0 10px",border:"1px solid lightgray",borderRadius:6,display:"flex",alignItems:"center",marginTop:4,height:32},"& .f2":{width:"100%",padding:"4px 8px",border:"0px solid lightgray",borderRadius:6,marginLeft:10}},"& .taxColumn":{maxWidth:"160px!important"},InvoiceLineHeadRoot:{backgroundColor:"lightgray"},selectRoot:{backgroundColor:"green"}},outlined:{padding:"6px 24px 6px 12px!important"},billing:{width:170,fontSize:"1.3rem"},services:{width:180,fontSize:"1.3rem"},dropdownMenu:{"& li":{fontSize:12,height:12}},lineButton:(t={width:24,height:24,minHeight:24},Object(R.a)(t,e.breakpoints.down("sm"),{width:24,height:24,minHeight:24}),Object(R.a)(t,"& .material-icons",{fontSize:16}),t),lineCancelButton:(a={width:24,height:24,minHeight:24,backgroundColor:"#ff4850",color:"white","&:hover":{backgroundColor:"#ff2a32"}},Object(R.a)(a,e.breakpoints.down("sm"),{width:24,height:24,minHeight:24,padding:0}),Object(R.a)(a,"& .material-icons",{fontSize:16}),a),distribution:{"& span":{backgroundColor:"lightgrey",padding:"6px 12px",borderRadius:20}},tableTheadRow:{backgroundColor:e.palette.primary.main},input:{fontSize:13},fInput:{width:"96%",marginLeft:15,"& input":{fontSize:13,textAlign:"right"}},container:{position:"relative",width:"100%"},suggestionsContainerOpen:{position:"fixed",zIndex:100,marginTop:e.spacing.unit,maxHeight:200,overflowY:"scroll",backgroundColor:"white",borderRadius:6,border:"1px solid lightgray"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},root1:{flexGrow:1},input1:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden","&+div":{}},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(de.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:12},placeholder:{position:"absolute",left:6,fontSize:12},paper:{position:"fixed",zIndex:"9999!important",marginTop:e.spacing.unit,fontSize:12},divider:{height:2*e.spacing.unit},billingSuggestion:{"& >div":{width:"100%"}}}})(Object(p.g)(Object(le.a)(function(e){var t=e.invoices,a=e.franchisees,n=e.auth;return{invoiceForm:t.invoiceForm,invoiceDetail:t.invoiceDetail,franchisees:a.franchiseesDB,regionId:n.login.defaultRegionId,customerTaxAmountLine:t.customerTaxAmountLine,bStartingSaveFormData:t.bStartingSaveFormData,billingLists:t.billingLists,serviceLists:t.serviceLists}},function(e){return Object(oe.c)({updateInvoiceLine:re.te,getCustomerTaxAmount:re.Xc,getServiceLists:re.nd},e)})(Ce))),Ee=a(217),ye=a.n(Ee),Ne=a(256),Ie=a.n(Ne),Oe=a(23),we=a.n(Oe),Te=a(125),De=a.n(Te),ke={MasterTrxTypeListId:"",RegionId:"",RegionName:"",InvoiceId:"",InvoiceDate:we()().format("YYYY-MM-DD"),DueDate:we()().format("YYYY-MM-DD"),CustomerId:"",CustomerNo:"",CustomerName:"",EBill:"",PrintInvoice:"",InvoiceDescription:"",InvoiceAmount:"",InvoiceTax:"",InvoiceTotal:"",CPI:"",TransactionStatusListId:"",TransactionStatus:"",InvoiceBalanceAmount:"",InvoiceBalanceTax:"",InvoiceBalanceTotal:"",EBillText:"",PrintInvoiceText:"",IsOpen:"",ConsolidatedInvoice:"",ConsolidatedInvoiceId:"",ConsolidatedInvoiceNo:"",CreditId:"",Service:"",notes:""};function Fe(e,t){var a=t.query,n=t.isHighlighted,i=ye()(e.CustomerName,a),s=Ie()(e.CustomerName,i);return d.a.createElement(g.R,{selected:n,component:"div"},d.a.createElement("div",null,s.map(function(e,t){return e.highlight?d.a.createElement("span",{key:String(t),style:{fontWeight:700}},e.text):d.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))}var je={success:E.a,warning:k.a,error:N.a,info:O.a};var Pe=Object(j.withStyles)(function(e){return{success:{backgroundColor:b.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,s=e.variant,o=Object(u.a)(e,["classes","className","message","onClose","variant"]),l=je[s];return d.a.createElement(g.cb,Object.assign({className:z()(t[s],a),"aria-describedby":"client-snackbar",message:d.a.createElement("span",{id:"client-snackbar",className:t.message},d.a.createElement(l,{className:z()(t.icon,t.iconVariant)}),n),action:[d.a.createElement(g.F,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},d.a.createElement(T.a,{className:t.icon}))]},o))}),Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state=Object(i.a)({},ke,{value:"",suggestions:[],selectedCustomer:null,fSuggestions:[],selectedFranchisee:null,labelWidth:0,selectedWork:"",total:0,subTotal:0,tax:0,markup:0,InvoiceNo:"new"===a.props.invoiceForm.type?"PENDING":"",snackMessage:"",openSnack:!1,PO_number:"",period:we()(),taxExempt:!1,bAlertNewInvoice:!1,buttonOption:0,franchiseeFromCustomer:null}),a.renderInputComponent=function(e){var t=e.classes,n=e.inputRef,i=void 0===n?function(){}:n,s=e.ref,o=Object(u.a)(e,["classes","inputRef","ref"]);return d.a.createElement(g.mb,Object.assign({fullWidth:!0,variant:"outlined",label:"Customer:",InputProps:{inputRef:function(e){s(e),i(e)},classes:{input:t.input},readOnly:"new"!==a.props.invoiceForm.type},InputLabelProps:{classes:{outlined:t.label}},required:!0},o,{autoFocus:!0}))},a.onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n.toString()})},a.onSuggestionsFetchRequested=function(e){var t=e.value;t.length<2||a.setState({suggestions:a.getSuggestions(t)})},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.getSuggestionValue=function(e){a.setState({selectedCustomer:e}),a.setState({PO_number:e.CustomerNo}),a.setState({franchiseeFromCustomer:e.Franchisees});var t=we()().year(),n=we()().month(),i=we()().year(t).month(n).endOf("month"),s=we()().year(t).month(n).endOf("month").add(e.PaymentTerm,"days");return"BOM"===e.InvoiceDayPreference&&(i=we()().year(t).month(n).startOf("month"),s=we()().year(t).month(n).startOf("month").add(e.PaymentTerm,"days")),a.setState({InvoiceDate:i.format("YYYY-MM-DD")}),a.setState({DueDate:s.format("YYYY-MM-DD")}),e.CustomerName},a.getSuggestions=function(e){var t=Object(me.e)(e.trim()),n=new RegExp(t,"i");if(null!==a.props.customers)return a.props.customers.filter(function(e){return n.test(e.CustomerName)})},a.getTotal=function(){if(null!==a.state.selectedCustomer){var e=0,t=0,i=0;if(null!==a.props.invoiceForm.data)Object(n.a)(a.props.invoiceForm.data.line).forEach(function(a){e+=parseFloat(a.extended),i+=parseFloat(a.tax),t+=parseFloat(a.markupAmount)}),"N"!==a.state.selectedCustomer.TaxExempt&&(i=0),a.setState({subTotal:e}),a.setState({markup:t}),a.setState({tax:i}),a.setState({total:e+i+t})}},a.handleChange=function(e){a.setState(B.a.set(Object(i.a)({},a.state),e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.addNewInvoice=function(){var e,t=[];a.props.invoiceForm.data.line.forEach(function(e){var n={Inv_No:"PENDING",ServiceTypeListId:0,Description:e.description,Billing:e.billing.value,Service:e.service.label,LineNo:1,UnitPrice:parseFloat(e.amount),Quantity:parseInt(e.quantity),TaxRate:e.tax,ExtendedPrice:e.extended,Total:e.total,MarkUpTotal:e.markup,Commission:0,CommissionTotal:0,ExtraWork:1,TaxExcempt:a.state.selectedCustomer.TaxExempt,Distribution:[]},i=[];e.franchisees.length>0&&e.franchisees.forEach(function(e){i.push({FranchiseeId:12,FranchiseeNumber:e.fnumber,LineNo:1,Name:e.name,Description:"Work done",Amount:e.amount})}),n.Distribution=i,t.push(n)}),a.props.invoiceForm.type,"new"===a.props.invoiceForm.type?(e={Inv_No:"PENDING",Apply_to:"Apply To",CustomerId:a.state.selectedCustomer.CustomerId,CustomerNumber:a.state.PO_number,CustomerName:a.state.selectedCustomer.CustomerName,PeriodId:a.props.invoices.PeriodId[0],PeriodMonth:we()(a.state.period).month()+1,PeriodYear:we()(a.state.period).year(),Description:a.state.InvoiceDescription,Notes:a.state.notes,RegionId:a.props.regionId,BillRunId:999,InvoiceDate:we()(a.state.InvoiceDate),DueDate:we()(a.state.DueDate),PONumber:a.state.PO_number,CreatedById:a.props.user.UserId,CreatedDate:"new"===a.props.invoiceForm.type?we()():a.props.invoices.invoiceDetail.Data.CreatedDate,SubTotal:a.state.subTotal,MarkupAmountTotal:a.state.markup,CPIIncrease:0,TaxTotal:a.state.tax,GrandTotal:a.state.total,TransactionStatusListId:2,Status:2,SysCust:a.state.selectedCustomer.SysCust,Items:t},a.props.addInvoice(a.props.regionId,e)):(e=Object(i.a)({},a.props.invoices.invoiceDetail.Data,{CustomerId:a.state.selectedCustomer.CustomerId,CustomerNumber:a.state.PO_number,CustomerName:a.state.selectedCustomer.CustomerName,PeriodId:a.props.invoices.PeriodId[0],PeriodMonth:we()(a.state.period).month()+1,PeriodYear:we()(a.state.period).year(),Description:a.state.InvoiceDescription,Notes:a.state.notes,RegionId:a.props.regionId,InvoiceDate:we()(a.state.InvoiceDate),DueDate:we()(a.state.DueDate),PONumber:a.state.PO_number,CreatedById:a.props.user.UserId,CreatedDate:"new"===a.props.invoiceForm.type?we()():a.props.invoices.invoiceDetail.Data.CreatedDate,SubTotal:a.state.subTotal,MarkupAmountTotal:a.state.markup,TaxTotal:a.state.tax,GrandTotal:a.state.total,TransactionStatusListId:2,Status:2,Items:t}),a.props.updateInvoice(a.props.invoices.invoiceDetail.Data._id,a.props.regionId,e)),console.log("result",JSON.stringify(e))},a.updateInvoice=function(){},a.validateNewInvoice=function(){return null!==a.state.selectedCustomer||(a.setState({snackMessage:"Please choose customer from Invoice suggestion"}),a.setState({openSnack:!0}),!1)},a.onSaveInvoice=function(e){a.validateNewInvoice()&&(a.setState({bAlertNewInvoice:!0}),a.setState({buttonOption:e}))},a.onSaveAndAddMore=function(){a.onSaveInvoice(0)},a.onSaveAndClose=function(){a.onSaveInvoice(1)},a.onSubmitForApproval=function(){a.onSaveInvoice(2)},a.closeComposeForm=function(){"edit"===a.props.invoiceForm.type?a.props.closeEditInvoiceForm():a.props.closeNewInvoiceForm()},a.handleDueDateChange=function(e){a.setState({DueDate:e})},a.handleInvoiceDateChange=function(e){a.setState({InvoiceDate:e})},a.handlePeriodChange=function(e){a.setState({period:e})},a.storeInputReference=function(e){null!==e&&(a.input=e.input)},a.handleCloseNewInvoice=function(){a.setState({bAlertNewInvoice:!1})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({openSnack:!1})},a.focusDescriptionInputField=function(e){e&&"edit"===a.props.invoiceForm.type&&setTimeout(function(){e.focus()},500)},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){null!==this.props.invoiceForm.data&&this.props.invoiceForm.data!==e.invoiceForm.data&&this.getTotal(),null!==this.state.selectedCustomer&&JSON.stringify(this.state.selectedCustomer)!==JSON.stringify(this.props.invoiceForm.customer)&&this.props.selectCustomer(this.state.selectedCustomer)}},{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;null!==e.invoiceForm.customer&&"edit"===e.invoiceForm.type&&(this.setState({InvoiceNo:e.invoices.invoiceDetail.Data.inv_no}),this.setState({value:e.invoiceForm.customer.CustomerName}),this.setState({PO_number:e.invoiceForm.customer.CustomerNo}),this.setState({InvoiceDescription:e.invoices.invoiceDetail.Data.Description}),this.setState({notes:e.invoices.invoiceDetail.Data.Notes}),this.setState({InvoiceDate:we()(e.invoices.invoiceDetail.Data.InvoiceDate).format("YYYY-MM-DD")}),this.setState({DueDate:we()(e.invoices.invoiceDetail.Data.DueDate).format("YYYY-MM-DD")})),null!==e.newInvoice&&e.newInvoice!==this.props.newInvoice&&(this.setState({bAlertNewInvoice:!1}),0===this.state.buttonOption?(this.props.updatedInvoices(),this.props.resetInvoiceForm(),this.setState({InvoiceDescription:""}),this.setState({notes:""}),this.setState({selectedCustomer:null}),this.setState({value:""}),this.setState({CustomerNo:""}),this.input&&"new"===this.props.invoiceForm.type&&setTimeout(function(){t.input.focus()},500)):1===this.state.buttonOption?(this.props.updatedInvoices(),this.closeComposeForm()):2===this.state.buttonOption&&(this.props.updatedInvoices(),this.closeComposeForm()))}},{key:"componentDidMount",value:function(){var e=this;if(this.input&&"new"===this.props.invoiceForm.type&&setTimeout(function(){e.input.focus()},500),this.props.invoices.invoiceDetail){var t=this.props.invoices.invoiceDetail.Data,a=this.props.customers.filter(function(e){return e.CustomerName===t.CustomerName&&e.CustomerNo===t.CustomerNumber});a.length>0&&this.setState({selectedCustomer:a[0]})}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.value,i=a.suggestions,s=new Date,o={renderInputComponent:this.renderInputComponent,suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:Fe},l=!1;return"new"===this.props.invoiceForm.type&&(l=!0),d.a.createElement(F.a,{animation:"transition.slideRightIn",delay:300},d.a.createElement("div",{className:"h-full flex flex-col relative"},d.a.createElement("div",{className:"flex flex-col p-24 pt-12 pb-0",style:{flex:"1"}},d.a.createElement(g.z,{container:!0,className:z()(t.formControl)},d.a.createElement(g.z,{item:!0,xs:12,sm:6,md:6,className:"flex flex-row pr-16"},d.a.createElement(q.a,Object.assign({},o,{inputProps:{classes:t,placeholder:"Search Customer Name or Number",value:n,onChange:this.onChange},theme:{container:z()(t.container),suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion},renderSuggestionsContainer:function(e){return d.a.createElement(g.V,Object.assign({},e.containerProps,{square:!0}),e.children)},ref:this.storeInputReference}))),d.a.createElement(f.b,{utils:h.a},d.a.createElement(g.z,{item:!0,xs:12,sm:4,md:4,className:"flex flex-row pl-16 pr-4"},d.a.createElement(f.a,{margin:"none",label:"Period",name:"InvoicePeriod",variant:"outlined",format:"MM/YYYY",className:t.textField,value:this.state.period,onChange:this.handlePeriodChange,fullWidth:!0,required:!0,InputProps:{classes:{input:t.input}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}},openToYearSelection:!0}),d.a.createElement(g.mb,{margin:"none",label:"Invoice Date",name:"InvoiceDate",type:"date",variant:"outlined",value:this.state.InvoiceDate,onChange:this.handleChange,fullWidth:!0,required:!0,className:t.textField,InputProps:{classes:{input:t.input1}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}}}),d.a.createElement(g.mb,{margin:"none",label:"Due Date",name:"DueDate",type:"date",variant:"outlined",value:this.state.DueDate,onChange:this.handleChange,fullWidth:!0,required:!0,InputProps:{classes:{input:t.input1}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}}})),d.a.createElement(g.z,{item:!0,xs:12,sm:1,md:1,className:"flex flex-row xs:flex-col xs:mb-24 pr-4 pl-4",style:{display:"none",padding:"0 6px!important"}}),d.a.createElement(g.z,{item:!0,xs:12,sm:1,md:1,className:"flex flex-row xs:flex-col pr-4 pl-4",style:{padding:"0 6px!important",display:"none"}})),d.a.createElement(g.z,{item:!0,xs:12,sm:2,md:2,className:"flex flex-row xs:flex-col pl-4"},d.a.createElement(g.mb,{margin:"none",label:"P.O #",placeholder:"P.O #",InputProps:{classes:{input:t.input}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}},name:"PO_number",variant:"outlined",value:this.state.PO_number,onChange:this.handleChange,required:!0,fullWidth:!0,style:{paddingRight:4}}),d.a.createElement(g.mb,{margin:"none",label:"Invoice #",placeholder:"Invoice #",InputProps:{readOnly:l,classes:{input:l?t.inputOrange:t.input}},InputLabelProps:{shrink:!0,classes:{outlined:t.label}},name:"InvoiceNo",variant:"outlined",value:this.state.InvoiceNo,onChange:this.handleChange,required:!0,fullWidth:!0,style:{paddingLeft:4,fontSize:"new"===this.props.invoiceForm.type?"18px!important":"inherit",fontWeight:"new"===this.props.invoiceForm.type?700:"inherit"}}))),d.a.createElement(P.a,{className:z()(t.formControl,"mb-0")},d.a.createElement(L.a,{xs:12,sm:6,md:6,className:"flex flex-row xs:flex-col"},d.a.createElement(g.d,{className:t.card},d.a.createElement(g.g,{title:"Customer",className:z()(t.cardHeader,"flex-1")}),d.a.createElement(g.f,{className:z()(t.cardContent)},d.a.createElement("div",{className:"flex flex-row justify-between mb-4"},d.a.createElement("div",{className:"flex flex-row"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"account_circle"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},d.a.createElement("strong",null,this.state.selectedCustomer?this.state.selectedCustomer.CustomerName:this.state.value))),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},d.a.createElement("strong",null,"Customer #: ",this.state.selectedCustomer?this.state.selectedCustomer.CustomerNo:this.state.CustomerNo))),this.state.selectedCustomer&&d.a.createElement("div",{className:"flex flex-row justify-start mb-4"},d.a.createElement("div",{className:"flex flex-row items-center"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"place"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},this.state.selectedCustomer.Address,", ",this.state.selectedCustomer.City,", ",this.state.selectedCustomer.StateName," ",this.state.selectedCustomer.PostalCode))),this.state.selectedCustomer&&d.a.createElement("div",{className:"flex flex-row justify-between mb-4"},d.a.createElement("div",{className:"flex flex-row items-center"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"smartphone"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},d.a.createElement(De.a,{value:this.state.selectedCustomer.Phone,displayType:"text",format:"+1 (###) ###-####",mask:"_",renderText:function(e){return d.a.createElement("div",null,e)}}))))))),d.a.createElement(L.a,{xs:12,sm:6,md:6,className:"flex flex-row justify-end xs:flex-col"},d.a.createElement(g.d,{className:t.card},d.a.createElement(g.g,{title:"Billing",className:z()(t.cardHeader,"flex-1")}),d.a.createElement(g.f,{className:z()(t.cardContent)},d.a.createElement("div",{className:"flex flex-row justify-between mb-4"},d.a.createElement("div",{className:"flex flex-row"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"account_circle"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},d.a.createElement("strong",null,this.state.selectedCustomer?this.state.selectedCustomer.BillingCustomerName:this.state.value)))),this.state.selectedCustomer&&d.a.createElement("div",{className:"flex flex-row justify-start mb-4"},d.a.createElement("div",{className:"flex flex-row items-center"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"place"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},this.state.selectedCustomer.BillingAddress,", ",this.state.selectedCustomer.BillingCity,", ",this.state.selectedCustomer.BillingState," ",this.state.selectedCustomer.BillingPostalCode))),this.state.selectedCustomer&&d.a.createElement("div",{className:"flex flex-row justify-between mb-4"},d.a.createElement("div",{className:"flex flex-row items-center"},d.a.createElement(g.E,{fontSize:"small",className:"mr-4"},"smartphone"),d.a.createElement(g.pb,{variant:"subtitle1",color:"inherit"},d.a.createElement(De.a,{value:this.state.selectedCustomer.Phone,displayType:"text",format:"+1 (###) ###-####",mask:"_",renderText:function(e){return d.a.createElement("div",null,e)}}))),d.a.createElement("div",null,d.a.createElement(g.w,{control:d.a.createElement(g.h,{name:"taxExempt",checked:"Y"===this.state.selectedCustomer.TaxExempt,onChange:this.handleChange,value:"checkedB",color:"primary",className:"p-0",disabled:!0}),label:"Tax Exempt"}))))))),d.a.createElement("div",{className:"w-full mt-4"},d.a.createElement(g.mb,{id:"InvoiceDescription",name:"InvoiceDescription",label:"Description",className:t.textField,value:this.state.InvoiceDescription,onChange:this.handleChange,margin:"dense",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0,classes:{outlined:t.label}},InputProps:{classes:{input:t.input,multiline:t.input}},inputRef:this.focusDescriptionInputField})),d.a.createElement(g.z,{container:!0,className:z()(t.formControl),style:{flex:"9999 1 0"}},d.a.createElement(g.z,{item:!0,xs:12,sm:12,md:12,className:"flex flex-row xs:flex-col xs:mb-24"},d.a.createElement(Se,{fn:this.state.franchiseeFromCustomer}))),d.a.createElement(g.r,{variant:"middle"})),d.a.createElement("div",{className:"flex flex-shrink flex-col w-full pl-24 pr-24 pt-0 pb-12"},d.a.createElement(P.a,{style:{alignItems:"center"},className:z()(t.formControl)},d.a.createElement(L.a,{xs:12,sm:9,md:9,className:"flex flex-col xs:flex-col xs:mb-24"},d.a.createElement("div",{className:"w-full"},d.a.createElement(g.mb,{id:"notes",name:"notes",label:"Note",className:t.textField,value:this.state.notes,onChange:this.handleChange,margin:"dense",variant:"outlined",fullWidth:!0,multiline:!0,InputLabelProps:{shrink:!0,classes:{outlined:t.label}},InputProps:{classes:{input:t.input,multiline:t.input}},rows:3}))),d.a.createElement(L.a,{xs:12,sm:3,md:3,className:"flex flex-col xs:flex-col xs:mb-24"},d.a.createElement("div",{className:"w-full p-12 flex justify-end pb-0"},d.a.createElement("span",{className:t.summary},d.a.createElement("strong",null,"Subtotal: "),"$",this.state.subTotal.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),d.a.createElement("div",{className:"w-full p-12 flex justify-end pb-0 pt-6 "},d.a.createElement("span",{className:t.summary},d.a.createElement("strong",null,"Markup Total: "),"$",this.state.markup.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),d.a.createElement("div",{className:"w-full p-12 flex justify-end pt-6 pb-6"},d.a.createElement("span",{className:t.summary},d.a.createElement("strong",null,"Tax: "),"$",this.state.tax.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))),d.a.createElement("div",{className:"w-full p-12 flex justify-end  pt-6 pb-6"},d.a.createElement("span",{className:t.summary},d.a.createElement("strong",null,"Grand Total: "),"$",this.state.total.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))))),d.a.createElement("div",{className:"flex flex-1 flex-row justify-between items-center"},d.a.createElement("div",{className:"flex flex-row justify-start"},d.a.createElement(F.a,{animation:"transition.expandIn",delay:300},d.a.createElement("span",{className:t.summary},d.a.createElement("strong",null,"Created By: "),"".concat(this.props.user.firstName," ").concat(this.props.user.lastName,", ").concat(we()(s).format("MM/DD/YYYY"))))),d.a.createElement("div",{className:"flex flex-1 flex-row justify-end"},d.a.createElement(F.a,{animation:"transition.expandIn",delay:300},d.a.createElement(g.c,{variant:"contained",color:"primary",className:z()(t.button,"mr-12"),onClick:function(){e.onSaveAndAddMore()}},"new"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Save & Add more"),"edit"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Update & Add more"))),d.a.createElement(F.a,{animation:"transition.expandIn",delay:300},d.a.createElement(g.c,{variant:"contained",color:"primary",className:z()(t.button,"mr-12"),onClick:function(){e.onSaveAndClose()}},"new"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Save & Close"),"new"!==this.props.invoiceForm.type&&d.a.createElement("span",null,"Update & Close"))),d.a.createElement(F.a,{animation:"transition.expandIn",delay:300},d.a.createElement(g.c,{variant:"contained",color:"primary",className:z()(t.button,"mr-12"),onClick:function(){e.onSubmitForApproval()}},"Submit for Approval")),d.a.createElement(F.a,{animation:"transition.expandIn",delay:300},d.a.createElement(g.c,{variant:"contained",color:"primary",className:t.button,onClick:function(){e.closeComposeForm()}},"Close"))))),d.a.createElement(g.bb,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.openSnack,autoHideDuration:3e3,onClose:this.handleClose},d.a.createElement(Pe,{onClose:this.handleClose,variant:"error",message:this.state.snackMessage})),d.a.createElement(g.m,{open:this.state.bAlertNewInvoice,onClose:function(){return e.handleCloseNewInvoice()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.a.createElement(g.q,{id:"alert-dialog-title"},"new"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Create New Invoice"),"edit"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Update The Invoice")),d.a.createElement(g.o,null,d.a.createElement(g.p,{id:"alert-dialog-description"},"new"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Do you really want to insert the new invoice?"),"new"!==this.props.invoiceForm.type&&d.a.createElement("span",null,"Do you really want to update the invoice?"))),d.a.createElement(g.n,null,d.a.createElement(g.c,{onClick:function(){return e.handleCloseNewInvoice()},color:"primary"},"Close"),d.a.createElement(g.c,{onClick:function(){return e.addNewInvoice()},color:"primary",autoFocus:!0},"new"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Create"),"edit"===this.props.invoiceForm.type&&d.a.createElement("span",null,"Update"))))))}}]),t}(m.Component);t.a=Object(j.withStyles)(function(e){return{layoutForm:{flexDirection:"row"},button:{"& span":{textTransform:"none"}},card:{width:"100%"},container:{position:"relative",width:"100%"},formControl:{marginBottom:12,minWidth:200},textField:{marginLeft:0,marginRight:e.spacing.unit},summary:{fontSize:15,fontWeight:700},suggestionsContainerOpen:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0,maxHeight:200,overflowY:"scroll"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit},cardHeader:{backgroundColor:e.palette.secondary.main,padding:"8px 24px","& span":{color:"white",fontSize:16}},cardContent:{paddingTop:12,paddingBottom:"12px!important","& h6":{lineHeight:1.6,fontSize:14}},input:{padding:"12px 14px"},input1:{padding:"12px 6px"},label:{transform:"translate(14px, 14px) scale(1)"},inputOrange:{padding:"12px 14px",color:"orange"},dropdownMenu:{"& li":{fontSize:12,height:12}},picker:{padding:"0 6px"}}},{withTheme:!0})(Object(p.g)(Object(le.a)(function(e){var t=e.invoices,a=e.auth,n=e.franchisees;return{invoiceForm:t.invoiceForm,invoices:t,newInvoice:t.newInvoice,user:a.login,regionId:a.login.defaultRegionId,bStartingSaveFormData:t.bStartingSaveFormData,franchisees:n.franchiseesDB}},function(e){return Object(oe.c)({openEditInvoiceForm:re.zd,closeEditInvoiceForm:re.wc,closeNewInvoiceForm:re.Cc,selectCustomer:re.Vd,resetInvoiceForm:re.Sd,addInvoice:re.qc,updateInvoice:re.re,updatedInvoices:re.Ae},e)})(Le)))}}]);
//# sourceMappingURL=5.10772c73.chunk.js.map