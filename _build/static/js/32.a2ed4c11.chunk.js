(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1845:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(15),o=a(19),i=a(17),l=a(18),s=a(58),c=a(13),d=a(0),p=a.n(d),u=a(1),h=a(10),m=a(167),f=a(1609),g=a(114),b=a(24),y=a(28),v=a(5),x=a(4),E=a.n(x),R=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={reportDate:new Date},a.handleChange=function(e){return function(t){a.setState(Object(c.a)({},e,t.target.checked)),a.props.toggleStatus(e,t.target.checked)}},a.handleInvoiceDateChange=function(e){a.setState({reportDate:e})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.setState({reportDate:this.props.reportDate})}},{key:"componentDidUpdate",value:function(e,t,a){t.reportDate!==this.state.reportDate&&this.props.updateReportDate(this.state.reportDate)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:E()(e.root)},p.a.createElement("div",{className:E()("flex flex-col")},p.a.createElement(u.V,{className:"flex flex-1 flex-col min-h-px p-20"},p.a.createElement(g.b,{utils:f.a},p.a.createElement("div",{style:{marginTop:50,display:"flex",flexDirection:"column"}},p.a.createElement("h3",null,"Choose a date"),p.a.createElement(g.a,{margin:"none",label:"Period",name:"InvoiceDate",variant:"outlined",format:"MM/dd/yyyy",value:this.state.reportDate,onChange:this.handleInvoiceDateChange,fullWidth:!0,required:!0,className:E()("mt-24")}))))))}}]),t}(d.Component);var w=Object(h.withStyles)(function(e){var t;return{root:{},panel:(t={position:"absolute",width:300,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[3],top:0,height:"100%",minHeight:"100%",bottom:0,left:-300,margin:0,zIndex:1e3,transform:"translate3d(50px,0,0)",overflow:"hidden"},Object(c.a)(t,e.breakpoints.down("md"),{transform:"translate3d(360px,0,0)",boxShadow:"none","&.opened":{boxShadow:e.shadows[5]}}),Object(c.a)(t,"transition",e.transitions.create(["transform"],{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.standard})),Object(c.a)(t,"&.opened1",{transform:"translateX(300px)"}),t)}})(Object(y.b)(function(e){var t=e.franchiseeReports;return e.auth,{filterState:t.bOpenedFilterPanelFranchiseeReports,reportDate:t.reportDate}},function(e){return Object(b.c)({updateReportDate:v.ye},e)})(R)),k=a(12),j=a(35),S=a(245),O=a(73),D=a(127),N=(a(172),a(31),function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={s:"",temp:[],data:[],selection:[],selectAll:!1,alertOpen:!1,keyToBeRemoved:-1,month:"01",year:"2017"},a.onChange=function(e,t){var n=t.newValue;t.method;a.setState({value:n.toString()})},a.toggleSelection=function(e,t,n){var r=Object(k.a)(a.state.selection),o=r.indexOf(e);o>=0?r=[].concat(Object(k.a)(r.slice(0,o)),Object(k.a)(r.slice(o+1))):r.push(e),a.setState({selection:r})},a.isSelected=function(e){return a.state.selection.includes(e)},a.search=function(e){var t=a.props.data.filter(function(t){return console.log("value=",t),-1!==t.Name.indexOf(e)||!e||-1!==t.FranchiseeNo.indexOf(e)||-1!==t.Number.indexOf(e)||-1!==t.ExtendedPrice.toString().indexOf(e)||-1!==t.Tax.toString().indexOf(e)||-1!==t.Fees.toString().indexOf(e)||-1!==t.TotalTrxAmount.toString().indexOf(e)});a.setState({data:t})},a.fetchData=a.fetchData.bind(Object(s.a)(Object(s.a)(a))),a.escFunction=a.escFunction.bind(Object(s.a)(Object(s.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.data!==e.data&&this.setState({data:this.props.data}),t.s!==this.state.s&&this.search(this.state.s)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"escFunction",value:function(e){27===e.keyCode&&(this.setState({s:""}),this.setState({data:this.props.data}))}},{key:"fetchData",value:function(e,t){this.setState({pageSize:e.pageSize,page:e.page})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.toggleSelection,n=this.isSelected,r=this.state,o=r.data,i=r.year,l=r.month;return 0===o.length?p.a.createElement("div",null):p.a.createElement("div",{className:E()(t.layoutTable,"flex flex-col h-full")},p.a.createElement(D.b,{data:o.FranchiseeReports,minRows:0,PaginationComponent:S.a,onFetchData:this.fetchData,getTheadThProps:function(e,t,a,n){var r="1px solid rgba(255,255,255,.6)";return"Actions"===a.Header&&(r="none"),{style:{fontSize:"1.6rem",fontFamily:'Muli,Roboto,"Helvetica",Arial,sans-serif',fontWeight:400,lineHeight:1.75,color:"white",borderRight:r}}},getTheadProps:function(e,a,n,r){return{style:{fontSize:13},className:t.tableTheadRow}},getTdProps:function(e,t,a,n){return{style:{textAlign:"center",flexDirection:"row",fontSize:12,padding:"0"}}},getTrProps:function(t,a,n){return{className:"cursor-pointer",onClick:function(t,n){e.props.history.push("/franchisees/reports/".concat(o.RegionId,"/").concat(a.original.BillYear,"/").concat(a.original.BillMonth,"/").concat(a.original.FranchiseeNo))}}},columns:[{columns:[{Header:function(e){return p.a.createElement("div",null)},accessor:"",Cell:function(e){return p.a.createElement(u.h,{onClick:function(e){e.stopPropagation()},checked:n(e.value.FranchiseeNo),onChange:function(){return a(e.value.FranchiseeNo)}})},className:"justify-center",sortable:!1,width:72}],className:E()("justify-center")},{columns:[{Header:"Franchisee #",accessor:"FranchiseeNo",filterAll:!0,className:E()(t.tableTdEven,"flex items-center  justify-center")},{Header:"Name",accessor:"FranchiseeName",filterAll:!0,className:E()(t.tableTdEven,"flex items-center  justify-center")},{Header:"Total Revenue",accessor:"TotalRevenue",Cell:function(e){return"$"+parseFloat(e.original.TotalRevenue).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:E()(t.tableTdEven,"flex items-center  justify-end p-12-impor")},{Header:"Total Deductions",accessor:"TotalDeductions",Cell:function(e){return"$"+parseFloat(e.original.TotalDeductions).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},className:E()(t.tableTdEven,"flex items-center  justify-end p-12-impor")},{Header:"Total Payment",Cell:function(e){return"$"+parseFloat(e.original.TotalPayment).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},accessor:"TotalPayment",className:E()("flex items-center  justify-end p-12-impor")},{Header:"Actions",Cell:function(e){return p.a.createElement("div",{className:"flex items-center actions pl-24"},p.a.createElement(u.F,{to:"/franchisees/reports/".concat(o.RegionId,"/").concat(i,"/").concat(l,"/").concat(e.original.FranchiseeNo),component:j.a},p.a.createElement(u.E,null,"visibility")))}}]},{columns:[{Header:"",cell:function(){return p.a.createElement("div",{className:"flex w-full justify-end"})}}]}],defaultPageSize:100,className:E()("-striped -highlight"),totalRecords:o.FranchiseeReports.length,style:{height:"100%"}}))}}]),t}(d.Component);var T=Object(h.withStyles)(function(e){return{layoutTable:{flexDirection:"row","& .z-9999":{height:64},"& .-pageSizeOptions":{display:"none"},"& .openFilter":{width:"inherit"},"& .openSummary":{width:300},"& .p-12-impor":{paddingLeft:"1.2rem!important",paddingRight:"1.2rem!important"},"& .ReactTable .rt-noData":{top:"250px",border:"1px solid coral"},"& .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover":{background:"rgba("+N(e.palette.secondary.main).r+","+N(e.palette.secondary.main).g+","+N(e.palette.secondary.main).b+", .8)",color:"white!important"},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .rt-thead.-headerGroups":{display:"none"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-end"}},content:{position:"relative"},tableTheadRow:{backgroundColor:e.palette.primary.main},tableThEven:{backgroundColor:"rgba("+N(e.palette.secondary.main).r+","+N(e.palette.secondary.main).g+","+N(e.palette.secondary.main).b+", .3)"},tableTdEven:{},summaryPanelButton:{backgroundColor:e.palette.secondary.main,minWidth:42,padding:8,color:"white",justifyContent:"center","&:hover":{backgroundColor:e.palette.primary.dark}},imageIcon:{width:24}}},{withTheme:!0})(Object(m.g)(Object(O.a)(function(e){var t=e.franchiseeReports;return{regionId:e.auth.login.defaultRegionId,franchiseeReports:t.franchiseeReports}},function(e){return Object(b.c)({toggleFilterPanel:v.ie},e)})(C))),F=a(7),I=a(23),P=a.n(I),H=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},L=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={s:"",data:[],selection:[],regionId:0,headerTitle:"",year:"2017",month:"01"},a.handleChange=function(e){return function(t){a.setState(Object(c.a)({},e,t.target.value))}},a.getFranchiseeReports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.franchiseeReports;if(null!==e){var t=P()(a.props.reportDate).year(),n=parseInt(P()(a.props.reportDate).month())+1;a.setState({headerTitle:"".concat(e.Data.Region[0].Name," Region Franchisee Reports for ").concat(n,"/").concat(t," Period")}),a.setState({data:e.Data.Region[0]})}},a.toggleLeftSidebar=function(){},a.handleChange=function(e){return function(t){a.setState(Object(c.a)({},e,t.target.value))}};var r=P()(a.props.reportDate).year(),l=parseInt(P()(a.props.reportDate).month())+1;return e.bLoadedFranchiseeReports||e.getReports(e.regionId,r,l),a.fetchData=a.fetchData.bind(Object(s.a)(Object(s.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"fetchData",value:function(e,t){this.setState({pageSize:e.pageSize,page:e.page})}},{key:"componentWillMount",value:function(){this.getFranchiseeReports()}},{key:"componentDidUpdate",value:function(e,t,a){var n=P()(this.props.reportDate).year(),r=parseInt(P()(this.props.reportDate).month())+1;this.props.regionId!==e.regionId&&this.props.getReports(this.props.regionId,n,r),this.props.reportDate!==e.reportDate&&this.props.getReports(this.props.regionId,n,r),e.franchiseeReports!==this.props.franchiseeReports&&this.getFranchiseeReports()}},{key:"componentWillReceiveProps",value:function(e){this.props.franchiseeReports!==e.franchiseeReports&&this.getFranchiseeReports(e.franchiseeReports)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.filterState,r=t.toggleFilterPanel,o=this.state.selection;return p.a.createElement(F.m,{classes:{root:a.layoutRoot,header:a.layoutHeader,content:a.content,leftSidebar:E()(a.layoutLeftSidebar,{openFilter:n}),sidebarHeader:a.layoutSidebarHeader},leftSidebarHeader:p.a.createElement("div",{className:E()("flex flex-row w-full h-full justify-between p-12 align-middle pr-0",{filteropen:n})},p.a.createElement("h4",{style:{marginBlockStart:"1em"}},"Filter Panel"),p.a.createElement(F.a,{animation:"transition.expandIn",delay:200},p.a.createElement("div",null,p.a.createElement(u.D,{xsDown:!0},p.a.createElement(u.F,{onClick:function(e){return r()}},p.a.createElement(u.E,null,"close")))))),leftSidebarContent:p.a.createElement(w,null),header:p.a.createElement("div",{className:"flex row flex-1  p-8 sm:p-12 relative justify-between"},p.a.createElement("div",{className:"flex flex-row flex-1 justify-between"},p.a.createElement("div",{className:"flex flex-shrink items-center"},p.a.createElement("div",{className:"flex items-center"},p.a.createElement(F.a,{animation:"transition.expandIn",delay:300},p.a.createElement(u.E,{className:"text-32 mr-12"},"account_box")),p.a.createElement(F.a,{animation:"transition.slideLeftIn",delay:300},p.a.createElement(u.pb,{variant:"h6",className:"hidden sm:flex"},this.state.headerTitle)))),p.a.createElement("div",{className:"flex flex-shrink items-center"},p.a.createElement(F.a,{animation:"transition.expandIn",delay:300},p.a.createElement(u.t,{color:"secondary","aria-label":"add",className:E()(a.sideButton,"mr-12"),onClick:function(){return alert("ok")}},p.a.createElement(u.E,null,"add"))),p.a.createElement(F.a,{animation:"transition.expandIn",delay:300},p.a.createElement(u.t,{color:"secondary","aria-label":"add",className:E()(a.sideButton,"mr-12"),onClick:function(){return e.props.history.push("/apps/mail/inbox")}},p.a.createElement(u.E,null,"mail_outline"))),p.a.createElement(F.a,{animation:"transition.expandIn",delay:300},p.a.createElement(u.t,{color:"secondary","aria-label":"add",className:a.sideButton,onClick:function(){return alert("ok")}},p.a.createElement(u.E,null,"print"))))),p.a.createElement("div",{className:"flex flex-none items-end",style:{display:"none"}},p.a.createElement(F.a,{animation:"transition.expandIn",delay:600},p.a.createElement(u.t,{color:"secondary","aria-label":"add",className:a.addButton,onClick:function(){return alert("ok")}},p.a.createElement(u.E,null,"add"))),o.length>0&&p.a.createElement(F.a,{animation:"transition.expandIn",delay:600},p.a.createElement(u.t,{color:"secondary","aria-label":"delete",className:a.removeButton,onClick:function(){return e.removeInvoices()}},p.a.createElement(u.E,null,"delete"))))),content:p.a.createElement("div",{className:"flex-1 flex-col absolute w-full h-full"},p.a.createElement("div",{className:E()("flex flex-col h-full")},p.a.createElement("div",{className:"flex flex-row items-center p-12"},p.a.createElement("div",{className:"flex justify-start items-center"},p.a.createElement(u.D,{smDown:!0},p.a.createElement(u.c,{onClick:function(e){return r()},"aria-label":"toggle filter panel",color:"secondary",disabled:!!n,className:E()(a.filterPanelButton)},p.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"}))),p.a.createElement(u.D,{smUp:!0},p.a.createElement(u.c,{onClick:function(t){return e.pageLayout.toggleLeftSidebar()},"aria-label":"toggle filter panel",className:E()(a.filterPanelButton)},p.a.createElement("img",{className:a.imageIcon,src:"assets/images/invoices/filter.png",alt:"filter"})))),p.a.createElement("div",{className:"flex items-center w-full h-44 mr-12 ml-12"},p.a.createElement(u.V,{className:"flex items-center w-full h-44 lg:mr-12 xs:mr-0"},p.a.createElement(u.G,{placeholder:"Search...",className:E()(a.search,"pl-16"),disableUnderline:!0,fullWidth:!0,value:this.state.s,onChange:this.handleChange("s"),inputProps:{"aria-label":"Search"}}),p.a.createElement(u.E,{color:"action",className:"mr-16"},"search")))),p.a.createElement(T,{data:this.state.data}))),onRef:function(t){e.pageLayout=t}})}}]),t}(d.Component);t.default=Object(h.withStyles)(function(e){return{layoutRoot:{flexDirection:"row","& .z-9999":{height:64},"& .-pageSizeOptions":{display:"none"},"& .ReactTable .rt-noData":{top:"250px",border:"1px solid coral"},"& .ReactTable .rt-thead.-headerGroups":{paddingLeft:"0!important",paddingRight:"0!important",minWidth:"inherit!important"},"& .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover":{background:"rgba("+H(e.palette.secondary.main).r+","+H(e.palette.secondary.main).g+","+H(e.palette.secondary.main).b+", .8)",color:"white!important"},"& .openFilter":{width:250},"& .openSummary":{width:300},"& .ReactTable .rt-tbody":{overflowY:"scroll",overflowX:"hidden"},"& .ReactTable .rt-tr-group":{flex:"0 0 auto"},"& .ReactTable .rt-thead .rt-th:nth-child(1)":{justifyContent:"center"},"& .ReactTable .rt-thead.-headerGroups .rt-th:nth-child(2)":{width:"inherit!important",minWidth:"inherit!important"},"& .ReactTable .rt-thead .rt-th:last-child":{justifyContent:"flex-start"},"& .p-12-impor":{paddingLeft:"1.2rem!important",paddingRight:"1.2rem!important"}},layoutHeader:{height:80,minHeight:80,backgroundColor:e.palette.secondary.main},layoutLeftSidebar:Object(c.a)({width:0},e.breakpoints.down("sm"),{width:"inherit"}),layoutSidebarHeader:{height:80,minHeight:80,display:"flex",alignItems:"center",backgroundColor:e.palette.secondary.main},content:{position:"relative"},search:Object(c.a)({width:"100%"},e.breakpoints.down("sm"),{width:"100%"}),sideButton:{backgroundColor:e.palette.primary.light,height:46,width:46,"&:hover":{backgroundColor:e.palette.primary.dark}},tableTheadRow:{backgroundColor:e.palette.primary.main,padding:12},imageIcon:{width:24},filterPanelButton:{backgroundColor:e.palette.secondary.main,minWidth:42,padding:8,justifyContent:"center","&:hover":{backgroundColor:e.palette.primary.dark}}}},{withTheme:!0})(Object(m.g)(Object(O.a)(function(e){var t=e.franchiseeReports,a=e.auth;return{franchiseeReports:t.franchiseeReports,bLoadedFranchiseeReports:t.bLoadedFranchiseeReports,filterState:t.bOpenedFilterPanelFranchiseeReports,regionId:a.login.defaultRegionId,reportDate:t.reportDate}},function(e){return Object(b.c)({getReports:v.md,toggleFilterPanel:v.ie},e)})(L)))}}]);
//# sourceMappingURL=32.a2ed4c11.chunk.js.map